<!DOCTYPE html>
<html lang="zh-TW">
  <head><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@kyomind">
<meta property="og:type" content="article"><meta name="twitter:title" content="Python 開發：Ruff Linter、Formatter 介紹 + 設定教學">
  <meta property="og:title" content="Python 開發：Ruff Linter、Formatter 介紹 + 設定教學"><meta name="twitter:description" content="本文介紹 Ruff 這個高效的 Python linter、formatter，並示範如何在 VS Code、pre-commit 中設定 Ruff，附程式碼。">
  <meta property="og:description" content="本文介紹 Ruff 這個高效的 Python linter、formatter，並示範如何在 VS Code、pre-commit 中設定 Ruff，附程式碼。"><meta name="twitter:image" content="https://i.imgur.com/klPlw0x.jpg">
  <meta property="og:image" content="https://i.imgur.com/klPlw0x.jpg">
<meta name="description" content="本文介紹 Ruff 這個高效的 Python linter、formatter，並示範如何在 VS Code、pre-commit 中設定 Ruff，附程式碼。" />


<meta property="og:locale" content="zh-TW" />
<meta property="og:site_name" content="Code and Me" />
<meta property="article:publisher" content="https://blog.kyomind.tw" />
<meta property="article:author" content="Kyo" /><meta property="article:section" content="軟體開發" />
            

  <meta property="article:modified_time" content="2024-06-25T18:32:43+08:00" />




  <meta property="article:published_time" content="2023-12-17T17:41:36+08:00" />



<meta name="author" content="Kyo Huang" />
<meta http-equiv="content-language" content="zh-TW" />
<link rel="alternate" href="/atom.xml" title="Code and Me" type="application/atom+xml"><link rel="shortcut icon" type="image/x-icon" href="/leaf.png?v=2.11.0" />
<link rel="canonical" href="https://blog.kyomind.tw/ruff/"/>

<link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />
<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.11.0" />

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NL7WVE1X7Z"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NL7WVE1X7Z');

</script><script>
  window.config = {"leancloud":{"app_id":null,"app_key":null},"toc":false,"fancybox":true,"pjax":"","latex":false};
</script>

    <title>Python 開發：Ruff Linter、Formatter 介紹 + 設定教學 - Code and Me</title>
  <meta name="generator" content="Hexo 6.3.0"></head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Code and Me</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list"><a href="/archives/">
        <li class="mobile-menu-item">文章列表
          </li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">分類
          </li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">標籤
          </li>
      </a><a href="/ranking/">
        <li class="mobile-menu-item">排名
          </li>
      </a><a href="/series/">
        <li class="mobile-menu-item">系列
          </li>
      </a><a href="/subscribe/">
        <li class="mobile-menu-item">訂閱
          </li>
      </a><a href="/about/">
        <li class="mobile-menu-item">關於
          </li>
      </a></ul>
</nav>
<div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Code and Me</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu"><li class="menu-item">
        <a class="menu-item-link" href="/archives/">
          文章列表
          </a>
      </li>
    <li class="dropdown">
        <a class="menu-item-link" href="/categories/">
          分類 <b><span style="position: relative; top: -3px;">⌵</span></b>
          </a>
        <div class="dropdown-content">
          
            <a href="/categories/Django/">Django (11)</a>
          
            <a href="/categories/%E6%9B%B8%E8%A9%95-%C3%97-%E7%AD%86%E8%A8%98/">書評 × 筆記 (13)</a>
          
            <a href="/categories/%E5%BF%83%E5%BE%97/">心得 (36)</a>
          
            <a href="/categories/%E8%BB%9F%E9%AB%94%E9%96%8B%E7%99%BC/">軟體開發 (23)</a>
          
            <a href="/categories/Weekly-Review/">Weekly Review (34)</a>
          
            <a href="/categories/VS-Code/">VS Code (9)</a>
          
            <a href="/categories/Docker/">Docker (2)</a>
          
        </div>
      </li>
    <li class="menu-item">
        <a class="menu-item-link" href="/tags/">
          標籤
          </a>
      </li>
    <li class="menu-item">
        <a class="menu-item-link" href="/ranking/">
          排名
          </a>
      </li>
    <li class="menu-item">
        <a class="menu-item-link" href="/series/">
          系列
          </a>
      </li>
    <li class="menu-item">
        <a class="menu-item-link" href="/subscribe/">
          訂閱
          </a>
      </li>
    <li class="menu-item">
        <a class="menu-item-link" href="/about/">
          關於
          </a>
      </li>
    </ul>
</nav>
</header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content"><article class="post">
    <header class="post-header">
      <h1 class="post-title">Python 開發：Ruff Linter、Formatter 介紹 + 設定教學
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2023-12-18
        </span><span class="post-update">
            →  2024-05-25
          </span>
        <span class="post-category">
            <a href="/categories/%E8%BB%9F%E9%AB%94%E9%96%8B%E7%99%BC/">軟體開發</a>
            </span>
        </div>
    </header>

    <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目錄</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%AC%E6%96%87%E4%B8%BB%E6%97%A8%E8%88%87%E7%9B%AE%E6%A8%99%E8%AE%80%E8%80%85"><span class="toc-text">本文主旨與目標讀者</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Why-Ruff%EF%BC%9F"><span class="toc-text">Why Ruff？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%AC%E6%96%87%E7%AF%84%E4%BE%8B%E7%A8%8B%E5%BC%8F%E7%A2%BC"><span class="toc-text">本文範例程式碼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ruff-%E4%BB%8B%E7%B4%B9%E7%AF%87"><span class="toc-text">Ruff 介紹篇</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linter-%E9%83%A8%E5%88%86%EF%BC%9A%E5%8F%96%E4%BB%A3-Flake8-%E8%88%87-isort-%E7%AD%89%E7%AD%89"><span class="toc-text">Linter 部分：取代 Flake8 與 isort 等等</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Formatter-%E9%83%A8%E5%88%86%EF%BC%9A%E5%8F%96%E4%BB%A3-Black"><span class="toc-text">Formatter 部分：取代 Black</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%96%AE%E3%80%81%E9%9B%99%E5%BC%95%E8%99%9F%E8%AD%B0%E9%A1%8C"><span class="toc-text">單、雙引號議題</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ruff-%E8%A8%AD%E5%AE%9A%E7%AF%87"><span class="toc-text">Ruff 設定篇</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81pyproject-toml-%E8%A8%AD%E5%AE%9A"><span class="toc-text">一、pyproject.toml 設定</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81VS-Code-%E5%A5%97%E4%BB%B6%E8%A8%AD%E5%AE%9A"><span class="toc-text">二、VS Code 套件設定</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81pre-commit-%E8%A8%AD%E5%AE%9A"><span class="toc-text">三、pre-commit 設定</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ruff-%E8%A8%AD%E5%AE%9A%E7%AF%87%E5%B0%8F%E7%B5%90"><span class="toc-text">Ruff 設定篇小結</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B5%90%E8%AA%9E%EF%BC%9ATime-to-Ruff"><span class="toc-text">結語：Time to Ruff</span></a></li></ol>
    </div>
  </div><div class="post-content"><p><img src="https://i.imgur.com/klPlw0x.jpg" alt="from Pixabay"><span class="cap">from Pixabay</span></p>
<blockquote>
<p><code>2024/05/25</code>：新增系列第二篇〈<a href="/migrate-to-ruff/">Python 專案從 Flake8、Black 遷移至 Ruff 指南</a>〉；刪除「緣起」、「工作上我還未採用 Ruff 的理由」段落。</p>
</blockquote>
<blockquote>
<p><code>2024/05/10</code>：重新編輯全文，新增、刪除部分內容，補充更多設定實例。調整大量段落表述方式，提升文章流暢度。可視為 v1.5 版。</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/astral-sh/ruff">Ruff</a> 從去年（2022）6 月正式開源起算，已過去一年半，知道此工具的開發者也愈來愈多。雖然在去年就聽過它，但我卻一直沒有任何行動。</p>
<p>隨著前陣子 <a target="_blank" rel="noopener" href="https://github.com/astral-sh/ruff/releases/tag/v0.1.0">v0.1.0</a> 的發布（先別覺得這版本號怎麼乍看像早期測試版本🤣，前一版可是 v0.0.292），我感覺<strong>時機已到</strong>，所以進行了一番研究、嘗試，並寫下了本文。</p>
<h3 id="本文目錄"><a href="#本文目錄" class="headerlink" title="本文目錄"></a>本文目錄</h3><ol>
<li><a href="#%E6%9C%AC%E6%96%87%E4%B8%BB%E6%97%A8%E8%88%87%E7%9B%AE%E6%A8%99%E8%AE%80%E8%80%85">本文主旨與目標讀者</a></li>
<li><a href="#Why-Ruff%EF%BC%9F">Why Ruff？</a></li>
<li><a href="#%E6%9C%AC%E6%96%87%E7%AF%84%E4%BE%8B%E7%A8%8B%E5%BC%8F%E7%A2%BC">本文範例程式碼</a></li>
<li><a href="#Ruff-%E4%BB%8B%E7%B4%B9%E7%AF%87">Ruff 介紹篇</a></li>
<li><a href="#Linter-%E9%83%A8%E5%88%86%EF%BC%9A%E5%8F%96%E4%BB%A3-Flake8-%E8%88%87-isort-%E7%AD%89%E7%AD%89">Linter 部分：取代 Flake8 與 isort 等等</a></li>
<li><a href="#Formatter-%E9%83%A8%E5%88%86%EF%BC%9A%E5%8F%96%E4%BB%A3-Black">Formatter 部分：取代 Black</a></li>
<li><a href="#%E5%96%AE%E3%80%81%E9%9B%99%E5%BC%95%E8%99%9F%E8%AD%B0%E9%A1%8C">單、雙引號議題</a></li>
<li><a href="#Ruff-%E8%A8%AD%E5%AE%9A%E7%AF%87">Ruff 設定篇</a></li>
<li><a href="#%E4%B8%80%E3%80%81pyproject-toml-%E8%A8%AD%E5%AE%9A">一、pyproject.toml 設定</a></li>
<li><a href="#%E4%BA%8C%E3%80%81VS-Code-%E5%A5%97%E4%BB%B6%E8%A8%AD%E5%AE%9A">二、VS Code 套件設定</a></li>
<li><a href="#%E4%B8%89%E3%80%81pre-commit-%E8%A8%AD%E5%AE%9A">三、pre-commit 設定</a></li>
<li><a href="#Ruff-%E8%A8%AD%E5%AE%9A%E7%AF%87%E5%B0%8F%E7%B5%90">Ruff 設定篇小結</a></li>
<li><a href="#%E7%B5%90%E8%AA%9E%EF%BC%9ATime-to-Ruff">結語：Time to Ruff</a></li>
</ol>
<span id="more"></span>

<h3 id="系列：Python-Ruff-教學"><a href="#系列：Python-Ruff-教學" class="headerlink" title="系列：Python Ruff 教學"></a>系列：Python Ruff 教學</h3><ul>
<li><a href="/series/#Python-Ruff-%E6%95%99%E5%AD%B8">系列文章清單（連載中）</a></li>
</ul>
<hr>
<h2 id="本文主旨與目標讀者"><a href="#本文主旨與目標讀者" class="headerlink" title="本文主旨與目標讀者"></a>本文主旨與目標讀者</h2><p>我在〈<a href="https://blog.kyomind.tw/pre-commit/">Python 開發：pre-commit 設定 Git Hooks 教學</a>〉曾提過：</p>
<blockquote>
<p>考慮到「pre-commit」這個主題已經有數篇文章珠玉在前，我下筆前都已拜讀完。<strong>本文的論述重心會盡可能與這些文章錯開，或乾脆直接引用，以降低不必要的重複感。</strong></p>
</blockquote>
<p>而 Ruff 也是如此，推薦你先讀過這篇〈<a target="_blank" rel="noopener" href="https://myapollo.com.tw/blog/python-linter-ruff/">新世代的 Python Linter - Ruff</a>〉，然後再繼續閱讀本文，以獲得<strong>更全面的理解</strong>。</p>
<p>接下來對 Ruff 的介紹，將有<strong>不同的側重與著墨</strong>，以及<strong>更多設定細節。</strong></p>
<h3 id="本文主旨"><a href="#本文主旨" class="headerlink" title="本文主旨"></a>本文主旨</h3><p>本文主要分為<strong>三大部分</strong>：</p>
<ol>
<li><strong>前言。</strong></li>
<li><strong>Ruff 介紹篇。</strong></li>
<li><strong>Ruff 設定篇。</strong></li>
</ol>
<p>一開始不免俗地先講述我研究與使用 Ruff 的動機與理由，接著介紹 Ruff 的主要功能——linter 與 formatter。包括<strong>它能取代的工具、特色、優勢。</strong></p>
<p>而「設定篇」著重的，則是在初步了解 Ruff 之後，如果真要採用它，我們還需要<strong>處理好哪些環節</strong>，才能在開發中流暢地使用它。</p>
<h3 id="目標讀者"><a href="#目標讀者" class="headerlink" title="目標讀者"></a>目標讀者</h3><p>本文的目標讀者有三：</p>
<ol>
<li>Python 開發中還沒有認真用過 linter、formatter 作為規範工具，想要開始導入，並希望用 Ruff 一次解決的人。</li>
<li>長期使用「<strong>Flake8 + isort + Black</strong>」這套 Python 開發經典組合，對 Ruff 有高度興趣，想要試試看的人。</li>
<li>Code Formatting in Python 愛好者。</li>
</ol>
<p>簡言之，這篇文章是寫給「<strong>已經用 Python 一段時間</strong>」的人，而非 Python 初學者。</p>
<p>不過話說回來，如果初學者一開始就肯使用 Ruff 好好規範自己所寫的 Python code，不正是一個<strong>絕佳的開端</strong>嗎？😎</p>
<hr>
<h2 id="Why-Ruff？"><a href="#Why-Ruff？" class="headerlink" title="Why Ruff？"></a>Why Ruff？</h2><p>什麼是 Ruff，一句話說就是：</p>
<blockquote>
<p>An extremely fast Python linter and code formatter, written in Rust.</p>
</blockquote>
<p>而我認為採用 Ruff 主要基於下面<strong>兩大理由</strong>。</p>
<h3 id="一、快，就是快"><a href="#一、快，就是快" class="headerlink" title="一、快，就是快"></a>一、快，就是快</h3><p>下圖來自 <a target="_blank" rel="noopener" href="https://github.com/astral-sh/ruff">Ruff 的 GitHub 首頁</a>，很好表達了為何要採用 Ruff——<strong>因為快。</strong></p>
<p><img src="https://i.imgur.com/rjPXQg4.png"></p>
<p>用 Rust 寫的，快，自然不在話下。</p>
<p>而「極致的快」在很多時候會大幅改變你做事的方式——不過這對於大型專案可能才更有感。</p>
<p>對於中、小型專案，<strong>我覺得以下第二個理由更加重要。</strong></p>
<h3 id="二、All-in-One：整合眾多套件"><a href="#二、All-in-One：整合眾多套件" class="headerlink" title="二、All-in-One：整合眾多套件"></a>二、All-in-One：整合眾多套件</h3><p>不止是速度，Ruff 的「<strong>整合能力</strong>」也不容小覷。</p>
<p>按照官方文件，有了 Ruff 後，以下的工具都<strong>不必再安裝了：</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://pypi.org/project/flake8/">Flake8</a> 和一堆 Flake8 外掛</li>
<li><a target="_blank" rel="noopener" href="https://github.com/psf/black">Black</a>（或其它 Python formatter）</li>
<li><a target="_blank" rel="noopener" href="https://pypi.org/project/isort/">isort</a></li>
<li><a target="_blank" rel="noopener" href="https://pypi.org/project/pydocstyle/">pydocstyle</a></li>
<li><a target="_blank" rel="noopener" href="https://pypi.org/project/pyupgrade/">pyupgrade</a></li>
<li><a target="_blank" rel="noopener" href="https://pypi.org/project/autoflake/">autoflake</a></li>
<li>還有更多！</li>
</ul>
<p>想想是不是有一點「<a href="https://blog.kyomind.tw/pyproject-toml/#pyproject-toml-%E4%BB%8B%E7%B4%B9">pyproject.toml</a>」企圖統一天下，整合眾多工具設定檔的味道呢？</p>
<blockquote>
<p>相關文章：Python 開發設定檔——pyproject.toml 的崛起（待發表）</p>
</blockquote>
<p>上述這些工具，尤其是最常用的 Flake8、isort、Black Formatter，如果現在只需要用一個工具就能實現，而且還更快、更好。</p>
<p>那我們何樂而不為？</p>
<hr>
<h2 id="本文範例程式碼"><a href="#本文範例程式碼" class="headerlink" title="本文範例程式碼"></a>本文範例程式碼</h2><p>本文中所提到的 Ruff <strong>具體設定內容</strong>，包括 pyproject、VS Code、pre-commit 部分，都會加到這個 <a target="_blank" rel="noopener" href="https://github.com/kyomind/Django-Tutorial">GitHub 專案</a>中。</p>
<p>其中值得參考的檔案有：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://github.com/kyomind/Django-Tutorial/blob/main/pyproject.toml">pyproject.toml</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/kyomind/Django-Tutorial/blob/main/.vscode/settings.json">.vscode&#x2F;settings.json</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/kyomind/Django-Tutorial/blob/main/.pre-commit-config.yaml">.pre-commit-config.yaml</a></li>
</ol>
<hr>
<p>前言結束，接下來我們進入正題。首先是對 Ruff 的介紹。</p>
<h2 id="Ruff-介紹篇"><a href="#Ruff-介紹篇" class="headerlink" title="Ruff 介紹篇"></a>Ruff 介紹篇</h2><p>Ruff 是一個 Python linter + formatter，雖然大部分人可能只使用它的 linter 部分，因為 formatter 還處於 beta 階段。</p>
<p>Ruff formatter 是一個相對獨立的功能，在開源後才開始建構。你完全可以只用 Ruff 的 linter，而依舊使用 Black 或 yapf 來格式化程式碼。</p>
<p>不過，即使只看 Ruff 的 linter 部分，它也並不是一個「單純的 linter」而已。因為它的實際行為超過了<strong>靜態分析</strong>（static analysis）。</p>
<p>所以，想要全面了解 Ruff，我們需要具體知曉，<strong>它能夠做到哪些事、取代哪些工具。</strong></p>
<h2 id="Linter-部分：取代-Flake8-與-isort-等等"><a href="#Linter-部分：取代-Flake8-與-isort-等等" class="headerlink" title="Linter 部分：取代 Flake8 與 isort 等等"></a>Linter 部分：取代 Flake8 與 isort 等等</h2><p>Ruff 的核心部分就是它的 linter，這點無庸置疑。</p>
<p>而 Flake8 作為 Python 開發中最流行的 linter，自然是 Ruff 首要取代的目標。所以 Ruff 連<strong>錯誤代碼都盡可能與 Flake8 一致</strong>，也是考慮到<strong>遷移的成本</strong>。</p>
<h3 id="Autofix-功能"><a href="#Autofix-功能" class="headerlink" title="Autofix 功能"></a>Autofix 功能</h3><p>不僅如此，Ruff 還能取代一眾「<strong>帶有 formatter 功能的 linter</strong>」——isort 就是其中的代表。而常見的 <a target="_blank" rel="noopener" href="https://github.com/asottile/pyupgrade">pyupgrade</a> 也是。</p>
<p>從這點可知，即使你沒有使用 Ruff 的 formatter 功能，它的 linter 部分還是<strong>帶有一定的 format 能力</strong>——也就是 <a target="_blank" rel="noopener" href="https://docs.astral.sh/ruff/linter/#fixes">autofix</a>。</p>
<p>這個特性<strong>真的很方便</strong>，但同時帶來了一定的複雜。</p>
<p>方便的是，你可以只安裝 Ruff linter，就<strong>獲得多種 linter 附帶的 format 行為</strong>。而複雜則在於：<strong>設定上的細節也比一般 linter 更多。</strong></p>
<h3 id="小結：Ruff-linter-是個簡易版-formatter"><a href="#小結：Ruff-linter-是個簡易版-formatter" class="headerlink" title="小結：Ruff linter 是個簡易版 formatter"></a>小結：Ruff linter 是個簡易版 formatter</h3><p>我原本以為 Ruff（不考慮<code>ruff-format</code>部分）只是一個比較快的靜態分析工具，顯然事實並非如此。</p>
<p>總之，我們只要記得：<strong>Ruff linter 有著簡易 format（autofix）能力</strong>——它是個簡易版的 formatter。</p>
<p>這和 Flake8 只做單純的靜態分析不同，Ruff linter 在檢查過程中，<strong>能夠直接對程式碼進行修改</strong>。當然，如果你不喜歡，這功能是<strong>可以關閉的。</strong></p>
<hr>
<h2 id="Formatter-部分：取代-Black"><a href="#Formatter-部分：取代-Black" class="headerlink" title="Formatter 部分：取代 Black"></a>Formatter 部分：取代 Black</h2><p>我相信從 Ruff 的開源之初，想過要做 formatter 功能。畢竟 Rust 這麼快，只做 linter 未免太可惜了！而且兩者在使用上往往密不可分。</p>
<p>和 linter 不同，formatter 具有<strong>強烈的排它性</strong>。不同的 formatter 之間，<strong>沒有相容可言</strong>。不像<strong>多個 linter 還可以疊加使用</strong>——如果你不嫌一堆警告很煩XD。</p>
<p>如果要寫一個全新的 formatter，就必須有足夠的理由，讓開發者願意<strong>放棄當前方案</strong>，採用你的新工具——<strong>這很不容易。</strong></p>
<p>比較可行的做法，是<strong>相容並取代</strong>市場上現有的 formatter。</p>
<p>既然要選一個，那當然是選 <a target="_blank" rel="noopener" href="https://github.com/psf/black">Black</a>——目前最流行的 Python formatter。</p>
<blockquote>
<p>Black Formatter 相關文章：</p>
<ul>
<li><a href="https://blog.kyomind.tw/beyond-the-basic-stuff-with-python-01/">《Python 功力提升的樂趣》筆記（一）Black、命名、壞味道</a></li>
<li><a href="https://blog.kyomind.tw/flake8-and-black/">VS Code：Python Flake8 與 Black Formatter 擴充套件快速上手</a></li>
</ul>
</blockquote>
<h3 id="和-Black-的相容性"><a href="#和-Black-的相容性" class="headerlink" title="和 Black 的相容性"></a>和 Black 的相容性</h3><p>因此，和對待 Flake8 一樣，Ruff formatter 必須與 Black 格式化後的結果，有<strong>高度的相容</strong>（一致）。否則你換了它的 formatter，卻帶來一堆格式化結果改動，絕對會造成遷移負擔與採用意願的下降。</p>
<p>按照官方文件中「<a target="_blank" rel="noopener" href="https://docs.astral.sh/ruff/formatter/#black-compatibility">Black compatibility</a> 」這段可知：</p>
<blockquote>
<p>Specifically, the formatter is intended to emit near-identical output when run over Black-formatted code. When run over extensive Black-formatted projects like Django and Zulip, <strong>&gt; 99.9% of lines are formatted identically</strong>. When migrating an existing project from Black to Ruff, you should expect to see a few differences on the margins, <strong>but the vast majority of your code should be unchanged.</strong></p>
</blockquote>
<p>兩者的相容性（一致性）<strong>高達 99.9% 以上</strong>。意味著你可以放心地從 Black 換到 Ruff，而不用擔心格式化結果的差異。</p>
<p>（但是有一個「<strong>但書</strong>」，請見下面的「<a href="#%E5%96%AE%E3%80%81%E9%9B%99%E5%BC%95%E8%99%9F%E8%AD%B0%E9%A1%8C">單、雙引號議題</a>」）</p>
<p>友善提醒：formatter 遷移的變動，最好<strong>獨立一個分支或 commit，一次就把所有格式化差異都處理掉。</strong>而不要和其他功能性的變動混在一起。</p>
<hr>
<h2 id="單、雙引號議題"><a href="#單、雙引號議題" class="headerlink" title="單、雙引號議題"></a>單、雙引號議題</h2><p>Python 允許開發者<strong>自由選擇</strong>要在程式碼中使用單引號或雙引號。</p>
<p>只有在比如 docstring 這種<strong>連續使用 3 個引號</strong>的場景，<strong>慣例</strong>上要求使用 3 個<strong>雙引號</strong>。</p>
<p>如果你對 Black 有一些了解，應該會知道，早期 Black 是<strong>完全不管</strong>你習慣用單引號還是雙引號，<strong>它一律把你的 Python 程式碼格式化為雙引號！</strong></p>
<p>這小小的硬性規則帶來了<strong>巨大的反彈</strong>，畢竟 Python 開發者中想必有不少人和我一樣，是「單引號」的支持者。</p>
<p>最後，Black 開發團隊也不得不妥協（這是 Black <strong>少數的妥協</strong>，因為該工具本身就是以「<strong>不妥協</strong>」為賣點🤣），加入了<code>skip-string-normalization</code>選項。</p>
<h3 id="Ruff-Formatter-的不同處理方式"><a href="#Ruff-Formatter-的不同處理方式" class="headerlink" title="Ruff Formatter 的不同處理方式"></a>Ruff Formatter 的不同處理方式</h3><p>而 Ruff linter 作為 Black 的替代方案，也會遇到相同的「困境」。不同於 Black，目前 Ruff linter 提供的是<code>quote-style</code>這個選項：</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">quote-style</span> = <span class="string">&quot;single&quot;</span>  <span class="comment"># 選項有 &quot;single&quot; 和 &quot;double&quot;</span></span><br></pre></td></tr></table></figure>
<p>如果設為<code>&quot;single&quot;</code>，Ruff 會把專案中的<strong>所有</strong>雙引號，都替換為單引號。不過，在上述<strong>慣例</strong>部分，Ruff 還是保留雙引號，不用擔心。</p>
<p>需要提醒的是，如果你的專案目前是<strong>單雙引號混用</strong>，因為 Ruff 會<strong>強制統一</strong>引號風格，<strong>這勢必會帶來不少的格式化差異。</strong>如上所述，這些變動最好<strong>統一獨立處理</strong>。</p>
<hr>
<p>接下來，我們要進入 Ruff 的「<strong>設定篇</strong>」。</p>
<h2 id="Ruff-設定篇"><a href="#Ruff-設定篇" class="headerlink" title="Ruff 設定篇"></a>Ruff 設定篇</h2><p>當要採用一個新的 linter、formatter 時（尤其站在團隊開發考量），以下這三個部分的支援成熟度，是我一定會慎重考慮的。</p>
<h3 id="設定檔（pyproject-toml-支援）"><a href="#設定檔（pyproject-toml-支援）" class="headerlink" title="設定檔（pyproject.toml 支援）"></a>設定檔（pyproject.toml 支援）</h3><p>複雜的工具都會有自己的設定檔，讓你可以客製化需求。如果能支援 pyproject.toml 則會更受到我的青睞。</p>
<blockquote>
<p>相關文章：<a href="https://blog.kyomind.tw/pyproject-toml/">Python 開發：pyproject.toml 介紹 + 使用教學</a></p>
</blockquote>
<h3 id="VS-Code-套件支援"><a href="#VS-Code-套件支援" class="headerlink" title="VS Code 套件支援"></a>VS Code 套件支援</h3><p>它能讓你在寫程式的同時，就能夠看到 linter 發出的警告，而不必等到 commit 之際才被 pre-commit 擋下來。</p>
<p>相較於 linter，<strong>formatter 更需要有自己的 VS Code 套件</strong>。讓你能直接在 VS Code 中進行格式化，而不用透過 CLI 指令或等到 pre-commit 時才自動修正。</p>
<p>即使我們只用 Ruff 的 linter 功能，但因為有「autofix」存在，如前所述，它本質上也是一個<strong>簡易的格式化器</strong>，所以最好有 VS Code 整合。</p>
<h3 id="pre-commit-支援"><a href="#pre-commit-支援" class="headerlink" title="pre-commit 支援"></a>pre-commit 支援</h3><p>pre-commit 是團隊協作中一道重要的關卡，我在「<a href="https://blog.kyomind.tw/pre-commit/#%E7%82%BA%E4%BB%80%E9%BA%BC%E8%A6%81%E4%BD%BF%E7%94%A8-pre-commit%EF%BC%9F">為什麼要使用 pre-commit？</a>」中已有相當的闡述。</p>
<p>對於一個開發工具，我們主要關心的是：「它是否提供 pre-commit hook？」</p>
<hr>
<p>以上 3 點，<strong>Ruff 都有完整支援</strong>。下面就來一一解說。</p>
<h2 id="一、pyproject-toml-設定"><a href="#一、pyproject-toml-設定" class="headerlink" title="一、pyproject.toml 設定"></a>一、pyproject.toml 設定</h2><p>Ruff 總共支援三種設定檔：<code>pyproject.toml</code>、<code>ruff.toml</code>、<code>.ruff.toml</code>。</p>
<p>如果不知道怎麼開始，參考<a target="_blank" rel="noopener" href="https://docs.astral.sh/ruff/configuration/">文件</a>是最快上手的方式。以下的範例與解說，我採用設定檔格式是<code>pyproject.toml</code>。</p>
<p>Ruff 因為功能眾多，設定上較為複雜。所幸，<strong>大部分時候，我們只需要設定一些基本的項目</strong>。</p>
<h3 id="基本設定與解說"><a href="#基本設定與解說" class="headerlink" title="基本設定與解說"></a>基本設定與解說</h3><p>首先，因為在<code>pyproject.toml</code>中，所以設定的 key 定是<code>[tool.xxx]</code>格式。</p>
<p>Linter 部分，一些基本的設定比如<code>line-length</code>和 Flake8 類似。其中<code>select</code>和沒有列出的<code>ignore</code>相對重要。</p>
<p><strong>Ruff 預設只會顯示 <code>E</code> 和 <code>F</code> 系列的錯誤訊息</strong>（而 Flake8 還有 <code>W</code> 系列）。想要增加或排除特定部分的錯誤訊息警示，就得透過<code>select</code>欄位調整。比如我的設定：</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[tool.ruff]</span></span><br><span class="line"><span class="attr">line-length</span> = <span class="number">100</span></span><br><span class="line"><span class="attr">target-version</span> = <span class="string">&quot;py310&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="section">[tool.ruff.lint]</span></span><br><span class="line"><span class="attr">select</span> = [<span class="string">&quot;E&quot;</span>, <span class="string">&quot;F&quot;</span>, <span class="string">&quot;I&quot;</span>, <span class="string">&quot;UP&quot;</span>]  <span class="comment"># I 和 UP 是 isort 和 pyupgrade</span></span><br><span class="line"></span><br><span class="line"><span class="section">[tool.ruff.format]</span></span><br><span class="line"><span class="attr">quote-style</span> = <span class="string">&quot;single&quot;</span></span><br></pre></td></tr></table></figure>

<p><code>select</code>加上了<code>I</code>和<code>UP</code>。分別代表了 isort 和 pyupgrade。一旦你開啟了它們，Ruff 就會提示相關錯誤，並在有錯誤時<strong>自動修正</strong>。（<strong>autofix 預設為開啟</strong>）</p>
<p>因為開啟了<code>UP</code>，所以我必須設定<code>target-version</code>（這裡為<code>py310</code>），意味著 Ruff 會將程式碼中<strong>舊的寫法</strong>自動轉換（autofix）為 Python 3.10 的寫法。</p>
<p>總之，可設定的項目非常豐富。</p>
<h3 id="設定懶人包"><a href="#設定懶人包" class="headerlink" title="設定懶人包"></a>設定懶人包</h3><p>如果你剛開始用 Ruff，不知道該設定哪些項目。我建議你可以先設定以下幾個：</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[tool.ruff]</span></span><br><span class="line"><span class="attr">line-length</span> = <span class="number">100</span>  <span class="comment"># 依照自己的專案需求設定</span></span><br><span class="line"></span><br><span class="line"><span class="section">[tool.ruff.lint]</span></span><br><span class="line"><span class="attr">select</span> = [<span class="string">&quot;E&quot;</span>, <span class="string">&quot;F&quot;</span>, <span class="string">&quot;I&quot;</span>]  <span class="comment"># 至少會加入 I，因為 isort 是必要的</span></span><br><span class="line"></span><br><span class="line"><span class="section">[tool.ruff.format]</span></span><br><span class="line"><span class="attr">quote-style</span> = <span class="string">&quot;single&quot;</span>  <span class="comment"># 依照自己的喜好或專案需求設定</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="二、VS-Code-套件設定"><a href="#二、VS-Code-套件設定" class="headerlink" title="二、VS Code 套件設定"></a>二、VS Code 套件設定</h2><p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=charliermarsh.ruff">Ruff 的 VS Code 套件</a>在 2022 年 12 月首次發表。</p>
<p>套件的重要性前面有提過，在此再次闡述：</p>
<ul>
<li>Linter：在 IDE 中<strong>直接提示</strong>，不必等到後續流程才發現錯誤。</li>
<li>Formatter：在 IDE <strong>直接格式化</strong>（尤其配合「<a href="https://blog.kyomind.tw/flake8-yapf-setting/#VS-Code-%E4%BD%BF%E7%94%A8-formatter-%E5%B0%8F%E6%92%87%E6%AD%A5">存檔時格式化</a>」），不需透過指令。</li>
</ul>
<p>基於上述兩個需求，如果一個全新的 linter 或 formatter 沒有相關的 VS Code 套件，我不會考慮使用。</p>
<h3 id="安裝與設定-Ruff-套件"><a href="#安裝與設定-Ruff-套件" class="headerlink" title="安裝與設定 Ruff 套件"></a>安裝與設定 Ruff 套件</h3><p>套件安裝後就可以直接使用，如果你的專案中已有專屬的 Ruff 設定檔，我覺得<strong>不需要再特別設定</strong> VS Code Ruff 套件部分。</p>
<p>不過還是提供我的設定：（以下為 VS Code <code>settings.json</code>內容）</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;ruff.enable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;ruff.organizeImports&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;ruff.fixAll&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;ruff.showNotifications&quot;</span><span class="punctuation">:</span> <span class="string">&quot;onWarning&quot;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<p>特別提醒，如果你在專案中有已經有自己的 Ruff 設定檔，那就<strong>不要設定 VS Code Ruff 套件的「<code>args</code>」部分</strong>。比如：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;ruff.lint.args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;--fix&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;ruff.format.args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;--fix&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<p>因為 VS Code 會<strong>優先使用<code>settings.json</code>的設定。</strong></p>
<h3 id="建議設定-VS-Code-Python"><a href="#建議設定-VS-Code-Python" class="headerlink" title="建議設定 VS Code Python"></a>建議設定 VS Code Python</h3><p>因此，Ruff 套件我覺得不特別設定也沒關係，有專案中的 Ruff 設定檔就夠了。</p>
<p>相對的，VS Code 的 Python 部分則<strong>建議要設定。</strong>開發會更順手。</p>
<p>具體內容，Ruff 套件首頁有範例。我們直接看<strong>最完整的版本</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;[python]&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;editor.formatOnSave&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;editor.codeActionsOnSave&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;source.fixAll&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;source.organizeImports&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;editor.defaultFormatter&quot;</span><span class="punctuation">:</span> <span class="string">&quot;charliermarsh.ruff&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>效果說明：</p>
<ol>
<li><code>editor.formatOnSave</code>：存檔時自動格式化（對所有 formatter 都有效）。</li>
<li><code>source.fixAll</code>：存檔時自動 fix。（類似 pre-commit 時，hook 的自動修正）</li>
<li><code>source.organizeImports</code>：存檔時自動排序 imports。</li>
</ol>
<p>我想上述這些 Python 設定才是 Ruff 在 VS Code 中流暢使用的重點。</p>
<h3 id="不同專案間切換"><a href="#不同專案間切換" class="headerlink" title="不同專案間切換"></a>不同專案間切換</h3><p>不一定每個專案都用 Ruff。在不使用 Ruff 的專案中，Ruff linter 還一直提示你錯誤，這樣會很煩。</p>
<p>此時可以讓 Ruff 在這個「工作區」停用！做法如下圖。</p>
<p><img src="https://i.imgur.com/lknGhsJ.png"></p>
<p>Formatter 部分，因為每個專案只能選定一種格式化器，選好就沒有衝突問題。</p>
<hr>
<h2 id="三、pre-commit-設定"><a href="#三、pre-commit-設定" class="headerlink" title="三、pre-commit 設定"></a>三、pre-commit 設定</h2><p>pre-commit 設定相對單純，更細部的行為，hook 會自動讀取設定檔中的內容。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">repo:</span> <span class="string">https://github.com/astral-sh/ruff-pre-commit</span></span><br><span class="line">  <span class="attr">rev:</span> <span class="string">v0.1.4</span></span><br><span class="line">  <span class="attr">hooks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">ruff</span></span><br><span class="line">      <span class="attr">args:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--fix</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">ruff-format</span></span><br></pre></td></tr></table></figure>

<p>這裡只要注意版本和 hook 的 id 即可。</p>
<hr>
<h2 id="Ruff-設定篇小結"><a href="#Ruff-設定篇小結" class="headerlink" title="Ruff 設定篇小結"></a>Ruff 設定篇小結</h2><p>Ruff 的設定真的滿多樣且<strong>可以很複雜</strong>。但是，如果你只是想要<strong>快速上手</strong>，其實只需要設定一些基本的項目。</p>
<p>如果你不清楚究竟有哪些項目可以調整，又想了解更多。</p>
<p>除了研究<a target="_blank" rel="noopener" href="https://docs.astral.sh/ruff/">官方文件</a>、<a target="_blank" rel="noopener" href="https://github.com/astral-sh/ruff">Github 頁面</a>的 README 外，去看看那些<a target="_blank" rel="noopener" href="https://github.com/astral-sh/ruff?tab=readme-ov-file#whos-using-ruff">已經採用了 Ruff 的開源專案</a>設定檔，也是很好的學習！</p>
<p>比如，我就習慣參考 <a target="_blank" rel="noopener" href="https://github.com/tiangolo/fastapi/blob/master/pyproject.toml">FastAPI 的設定</a>：</p>
<blockquote>
<p><code>2024/05/25</code>：引用內容為舊版 0.1.x 設定。新版設定可以直接參考上述連結。</p>
</blockquote>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[tool.ruff]</span></span><br><span class="line"><span class="attr">select</span> = [</span><br><span class="line">    <span class="string">&quot;E&quot;</span>,  <span class="comment"># pycodestyle errors</span></span><br><span class="line">    <span class="string">&quot;W&quot;</span>,  <span class="comment"># pycodestyle warnings</span></span><br><span class="line">    <span class="string">&quot;F&quot;</span>,  <span class="comment"># pyflakes</span></span><br><span class="line">    <span class="string">&quot;I&quot;</span>,  <span class="comment"># isort</span></span><br><span class="line">    <span class="string">&quot;C&quot;</span>,  <span class="comment"># flake8-comprehensions</span></span><br><span class="line">    <span class="string">&quot;B&quot;</span>,  <span class="comment"># flake8-bugbear</span></span><br><span class="line">    <span class="string">&quot;UP&quot;</span>,  <span class="comment"># pyupgrade</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="attr">ignore</span> = [</span><br><span class="line">    <span class="string">&quot;E501&quot;</span>,  <span class="comment"># line too long, handled by black</span></span><br><span class="line">    <span class="string">&quot;B008&quot;</span>,  <span class="comment"># do not perform function calls in argument defaults</span></span><br><span class="line">    <span class="string">&quot;C901&quot;</span>,  <span class="comment"># too complex</span></span><br><span class="line">    <span class="string">&quot;W191&quot;</span>,  <span class="comment"># indentation contains tabs</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>而且 FastAPI 真的很貼心，還加了註解！</p>
<hr>
<h2 id="結語：Time-to-Ruff"><a href="#結語：Time-to-Ruff" class="headerlink" title="結語：Time to Ruff"></a>結語：Time to Ruff</h2><p>Ruff 對我的重要性，雖然不如 <a href="https://blog.kyomind.tw/python-poetry/">Poetry 套件管理器</a>。但這樣的工具依舊讓人興奮且充滿期待。</p>
<p>我並不認為目前的 Python 開發一定要用上 Ruff，但值得你嘗試一下。</p>
<p>如果你也是一個 Code Formatting 愛好者，那麼 Ruff 絕對是一個值得你花時間研究的工具。</p>
<p>更重要的是，由 Rust 所引發的 Python 生態革命，現在才剛剛開始。</p>

      </div>

      

      
      

<div>
  <script type="text/javascript">
    document.write(
      "<iframe scrolling='no' frameborder='0' sandbox='allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-storage-access-by-user-activation' style='height: 212px; width: 100%;' src='https://button.like.co/in/embed/kyomind/button?referrer=" +
      encodeURIComponent(location.href.split("?")[0].split("#")[0]) + "'></iframe>");
  </script>
<div>

<div>
  <a href="https://portaly.cc/kyomind/support" target="_blank" class="cta">
    <span>支持我的創作</span>
    <svg viewBox="0 0 13 10" height="10px" width="15px">
      <path d="M1,5 L11,5"></path>
      <polyline points="8 1 12 5 8 9"></polyline>
    </svg>
  </a>
</div>
<br>

    <b style="font-size:21px">
      相關文章
    </b><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/migrate-to-ruff/" title="Python 專案從 Flake8、Black 遷移至 Ruff 指南" rel="bookmark">Python 專案從 Flake8、Black 遷移至 Ruff 指南</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/pyproject-toml/" title="Python 開發：pyproject.toml 介紹 + 使用教學" rel="bookmark">Python 開發：pyproject.toml 介紹 + 使用教學</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/pre-commit/" title="Python 開發：pre-commit 設定 Git Hooks 教學" rel="bookmark">Python 開發：pre-commit 設定 Git Hooks 教學</a></h3></div></li></ul><footer class="post-footer">
        <div class="post-tags">
            <a href="/tags/%E9%95%B7%E6%96%87/">長文</a>
            <a href="/tags/Python/">Python</a>
            <a href="/tags/Code-Formatting/">Code Formatting</a>
            <a href="/tags/pre-commit/">pre-commit</a>
            <a href="/tags/Ruff/">Ruff</a>
            <a href="/tags/Flake8/">Flake8</a>
            <a href="/tags/Black-Formatter/">Black Formatter</a>
            <a href="/tags/isort/">isort</a>
            <a href="/tags/pyproject-toml/">pyproject.toml</a>
            </div>
        
        <nav class="post-nav"><a class="prev" href="/four-thousand-weeks-01/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">《人生 4 千個禮拜》筆記（一）病態的生產力</span>
        <span class="prev-text nav-mobile">《人生 4 千個禮拜》筆記（一）病態的生產力</span>
      </a>
    <a class="next" href="/weekly-review-24/">
        <span class="next-text nav-default">24，收回「發文計畫」</span>
        <span class="prev-text nav-mobile">24，收回「發文計畫」</span>
        <i class="iconfont icon-right"></i>
      </a>
    </nav></footer>
    
      

<div style="background-color: #e7e9ec; border-radius: 5px;">
  <div class="categories">
    <div class="categories-tags">
      <a class="category-link" href="/categories/Django/">Django<span class="category-count">11</span></a> <a class="category-link" href="/categories/Docker/">Docker<span class="category-count">2</span></a> <a class="category-link" href="/categories/VS-Code/">VS Code<span class="category-count">9</span></a> <a class="category-link" href="/categories/Weekly-Review/">Weekly Review<span class="category-count">34</span></a> <a class="category-link" href="/categories/%E5%BF%83%E5%BE%97/">心得<span class="category-count">36</span></a> <a class="category-link" href="/categories/%E6%9B%B8%E8%A9%95-%C3%97-%E7%AD%86%E8%A8%98/">書評 × 筆記<span class="category-count">13</span></a> <a class="category-link" href="/categories/%E8%BB%9F%E9%AB%94%E9%96%8B%E7%99%BC/">軟體開發<span class="category-count">23</span></a>
    </div>
  </div>
</div>
</article></div><div class="comments" id="comments"><div id="utterances-container"></div>
    </div></div>
      </main>

      <footer id="footer" class="footer"><div class="social-links"><a href="mailto:odinxp@email.com" class="iconfont icon-email" title="email"></a>
        <a target="_blank" rel="noopener" href="https://x.com/kyomind" class="iconfont icon-twitter" title="twitter"></a>
        <a target="_blank" rel="noopener" href="https://www.linkedin.com/in/kyo-huang/" class="iconfont icon-linkedin" title="linkedin"></a>
        <a target="_blank" rel="noopener" href="https://github.com/kyomind" class="iconfont icon-github" title="github"></a>
        <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    </div><div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>
  </span>
  <span class="division">and</span>
  <span class="theme-info">
    <a class="theme-link" target="_blank" rel="noopener" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">&copy;2021 - 2024<span class="heart">
      <i class="iconfont icon-right"></i>
    </span>
    <span class="author">Kyo Huang</span>
  </span>
</div>
</footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div><script>
    var container = document.getElementById('utterances-container')
    var script = document.createElement('script')
    script.src = 'https://utteranc.es/client.js'
    script.setAttribute('repo', 'kyomind/blog-reply')
    script.setAttribute('issue-term', 'title')
    script.setAttribute('theme', 'github-light')
    script.setAttribute('label', 'utterances')
    script.crossorigin = 'anonymous'
    script.async = true

    container.appendChild(script)
  </script><script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/src/even.js?v=2.11.0"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="zh-TW">
  <head><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="description" content="Poetry + pyenv å¯¦æˆ°å¿ƒå¾—ï¼šå¸¸ç”¨æŒ‡ä»¤èˆ‡æ³¨æ„äº‹é …"/><meta name="keywords" content="Python, ç¨‹å¼, å¯«ä½œ, Notion, VS Code, Logseq" /><link rel="alternate" href="/atom.xml" title="Code and Me" type="application/atom+xml"><link rel="shortcut icon" type="image/x-icon" href="/leaf.svg?v=2.11.0" />
<link rel="canonical" href="https://blog.kyomind.tw/poetry-pyenv-practical-tips/"/>

<link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />
<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.11.0" />

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NL7WVE1X7Z"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NL7WVE1X7Z');

</script><script async src="https://umami.kyomind.tw/script.js"
        data-website-id="903192d8-bcca-4bf1-be13-a848b62792ee"></script><script>
  window.config = {"leancloud":{"app_id":null,"app_key":null},"toc":false,"fancybox":true,"pjax":"","latex":false};
</script>

    <title>Poetry + pyenv å¯¦æˆ°å¿ƒå¾—ï¼šå¸¸ç”¨æŒ‡ä»¤èˆ‡æ³¨æ„äº‹é … - Code and Me</title>
  <meta name="generator" content="Hexo 6.3.0"></head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Code and Me</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list"><a href="/archives/">
        <li class="mobile-menu-item">æ–‡ç« åˆ—è¡¨
          </li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">åˆ†é¡
          </li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">æ¨™ç±¤
          </li>
      </a><a href="/top10/">
        <li class="mobile-menu-item">TOP 10
          </li>
      </a><a href="/subscribe/">
        <li class="mobile-menu-item">è¨‚é–±
          </li>
      </a><a href="/about/">
        <li class="mobile-menu-item">é—œæ–¼
          </li>
      </a></ul>
</nav>
<div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Code and Me</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu"><li class="menu-item">
        <a class="menu-item-link" href="/archives/">
          æ–‡ç« åˆ—è¡¨
          </a>
      </li>
    <li class="dropdown">
        <a class="menu-item-link" href="/categories/">
          åˆ†é¡ <b><span style="position: relative; top: -3px;">âŒµ</span></b>
          </a>
        <div class="dropdown-content">
          
            <a href="/categories/%E9%9A%A8%E7%AD%86%E9%9B%9C%E8%AB%87/">éš¨ç­†é›œè«‡ (15)</a>
          
            <a href="/categories/Django/">Django (3)</a>
          
            <a href="/categories/%E8%BB%9F%E9%AB%94%E9%96%8B%E7%99%BC/">è»Ÿé«”é–‹ç™¼ (18)</a>
          
            <a href="/categories/VS-Code/">VS Code (10)</a>
          
            <a href="/categories/%E5%BF%83%E5%BE%97/">å¿ƒå¾— (14)</a>
          
            <a href="/categories/%E6%9B%B8%E8%A9%95/">æ›¸è©• (2)</a>
          
            <a href="/categories/Weekly-Review/">Weekly Review (21)</a>
          
            <a href="/categories/Docker/">Docker (2)</a>
          
        </div>
      </li>
    <li class="menu-item">
        <a class="menu-item-link" href="/tags/">
          æ¨™ç±¤
          </a>
      </li>
    <li class="menu-item">
        <a class="menu-item-link" href="/top10/">
          TOP 10
          </a>
      </li>
    <li class="menu-item">
        <a class="menu-item-link" href="/subscribe/">
          è¨‚é–±
          </a>
      </li>
    <li class="menu-item">
        <a class="menu-item-link" href="/about/">
          é—œæ–¼
          </a>
      </li>
    </ul>
</nav>
</header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content"><article class="post">
    <header class="post-header">
      <h1 class="post-title">Poetry + pyenv å¯¦æˆ°å¿ƒå¾—ï¼šå¸¸ç”¨æŒ‡ä»¤èˆ‡æ³¨æ„äº‹é …
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2023-06-05
        </span><span class="post-category">
            <a href="/categories/%E8%BB%9F%E9%AB%94%E9%96%8B%E7%99%BC/">è»Ÿé«”é–‹ç™¼</a>
            </span>
        </div>
    </header>

    <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">æ–‡ç« ç›®éŒ„</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%AC%E6%96%87%E4%B8%BB%E6%97%A8"><span class="toc-text">æœ¬æ–‡ä¸»æ—¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%9D-Poetry%E3%80%81pyenv%E3%80%81Python-3-10"><span class="toc-text">å®‰è£ Poetryã€pyenvã€Python 3.10</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Poetry-%E8%88%87-pyenv-%E7%9A%84%E9%83%A8%E5%88%86%E5%8A%9F%E8%83%BD%E9%87%8D%E7%96%8A"><span class="toc-text">Poetry èˆ‡ pyenv çš„éƒ¨åˆ†åŠŸèƒ½é‡ç–Š</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%88%9D%E5%A7%8B%E5%8C%96-Poetry-%E5%B0%88%E6%A1%88"><span class="toc-text">ä¸€ã€åˆå§‹åŒ– Poetry å°ˆæ¡ˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%82%BA%E5%B0%88%E6%A1%88%E5%BB%BA%E7%AB%8B-Python-%E8%99%9B%E6%93%AC%E7%92%B0%E5%A2%83"><span class="toc-text">äºŒã€ç‚ºå°ˆæ¡ˆå»ºç«‹ Python è™›æ“¬ç’°å¢ƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E7%A2%BA%E5%AE%9A%E5%B0%88%E6%A1%88%E4%BD%BF%E7%94%A8%E7%9A%84-Python-%E7%89%88%E6%9C%AC"><span class="toc-text">ä¸‰ã€ç¢ºå®šå°ˆæ¡ˆä½¿ç”¨çš„ Python ç‰ˆæœ¬</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E4%B8%8D%E5%90%8C%E5%B0%88%E6%A1%88%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%90%8C-Python-%E7%89%88%E6%9C%AC"><span class="toc-text">å››ã€ä¸åŒå°ˆæ¡ˆä½¿ç”¨ä¸åŒ Python ç‰ˆæœ¬</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%A6%82%E4%BD%95%E7%A7%BB%E9%99%A4-Poetry-%E8%99%9B%E6%93%AC%E7%92%B0%E5%A2%83%EF%BC%9F"><span class="toc-text">äº”ã€å¦‚ä½•ç§»é™¤ Poetry è™›æ“¬ç’°å¢ƒï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E5%AE%89%E8%A3%9D%E5%A5%97%E4%BB%B6%E8%87%B3-main-dependencies"><span class="toc-text">å…­ã€å®‰è£å¥—ä»¶è‡³ main dependencies</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%AE%89%E8%A3%9D%E5%A5%97%E4%BB%B6%E8%87%B3-dev-dependencies"><span class="toc-text">ä¸ƒã€å®‰è£å¥—ä»¶è‡³ dev dependencies</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81poetry-install-sync"><span class="toc-text">å…«ã€poetry install --sync</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81Docker-%E7%92%B0%E5%A2%83%E4%B8%AD%E4%BD%BF%E7%94%A8-Poetry"><span class="toc-text">ä¹ã€Docker ç’°å¢ƒä¸­ä½¿ç”¨ Poetry</span></a></li></ol>
    </div>
  </div><div class="post-content"><!-- ![from Pixabay](https://i.imgur.com/yODxmxJ.jpg) -->
<p><img src="https://i.imgur.com/npnmhFE.jpg" alt="from Pixabay"><span class="cap">from Pixabay</span></p>
<p>ã€ˆ<a href="https://blog.kyomind.tw/python-poetry/">å†è¦‹äº† pipï¼æœ€ä½³ Python å¥—ä»¶ç®¡ç†å™¨â€”â€”Poetry å®Œå…¨å…¥é–€æŒ‡å—</a>ã€‰ç™¼è¡¨è‡³ä»Šï¼Œå·²éäº† 1 å¹´å¤šï¼Œé€™æ„å‘³æˆ‘ä¹Ÿç”¨äº†ä¸€å¹´å¤šçš„ Poetryã€‚</p>
<p>æ„Ÿè¦ºå¦‚ä½•ï¼Ÿâ€”â€”æˆ‘è¦ºå¾—é‚„ä¸éŒ¯ï¼å¯è¦‹ä¸æ˜¯ä¸‰åˆ†é˜ç†±åº¦è€Œå·²ã€‚</p>
<p>å°ç¾åœ¨çš„æˆ‘è€Œè¨€ï¼ŒPoetry å·²æˆç‚ºå°ˆæ¡ˆé–‹ç™¼ä¸å¯æˆ–ç¼ºçš„å…ƒç´ ã€‚å®ƒä¸åƒ…æä¾›äº†æ›´åŠ ä¾¿æ·çš„å°ˆæ¡ˆå¥—ä»¶ç®¡ç†å’Œç‰ˆæœ¬æ§åˆ¶ï¼ŒåŒæ™‚ï¼ŒPoetry æ”¯æ´ pyproject.toml ä½œç‚ºè¨­å®šæª”çš„ç‰¹æ€§ï¼Œä¹Ÿä½¿å¾—æˆ‘æ›´å®¹æ˜“ä½¿ç”¨å…¶ä»–ä¹Ÿæ¡ç”¨ pyproject.toml çš„å·¥å…·ã€‚</p>
<blockquote>
<p>ç›¸é—œæ–‡ç« ï¼š<a href="https://blog.kyomind.tw/pyproject-toml/">pyproject.toml ä»‹ç´¹ + VS Code æ•´åˆ Blackã€yapfã€isort æ•™å­¸</a></p>
</blockquote>
<h3 id="ç³»åˆ—ï¼šPython-Poetry-ä¸‰éƒ¨æ›²"><a href="#ç³»åˆ—ï¼šPython-Poetry-ä¸‰éƒ¨æ›²" class="headerlink" title="ç³»åˆ—ï¼šPython Poetry ä¸‰éƒ¨æ›²"></a>ç³»åˆ—ï¼šPython Poetry ä¸‰éƒ¨æ›²</h3><blockquote>
<ol>
<li><a href="https://blog.kyomind.tw/python-poetry/">å†è¦‹äº† pipï¼æœ€ä½³ Python å¥—ä»¶ç®¡ç†å™¨â€”â€”Poetry å®Œå…¨å…¥é–€æŒ‡å—</a></li>
<li><strong>Poetry + pyenv å¯¦æˆ°å¿ƒå¾—ï¼šå¸¸ç”¨æŒ‡ä»¤èˆ‡æ³¨æ„äº‹é …</strong></li>
<li>çµ‚çµ requirements.txtï¼šDockerfile å¤šéšæ®µå»ºæ§‹ Poetry è™›æ“¬ç’°å¢ƒï¼ˆå¾…ç™¼è¡¨ï¼‰</li>
</ol>
</blockquote>
<span id="more"></span>

<hr>
<h2 id="æœ¬æ–‡ä¸»æ—¨"><a href="#æœ¬æ–‡ä¸»æ—¨" class="headerlink" title="æœ¬æ–‡ä¸»æ—¨"></a>æœ¬æ–‡ä¸»æ—¨</h2><p>æœ¬æ–‡å°‡è£œå……ç³»åˆ—ç¬¬ä¸€ç¯‡ä¸­åœ¨ã€Œ<a href="https://blog.kyomind.tw/python-poetry/#Poetry-%E5%B8%B8%E8%A6%8B%E4%BD%BF%E7%94%A8%E6%83%85%E5%A2%83%E8%88%87%E6%93%8D%E4%BD%9C-QA">æƒ…å¢ƒä½¿ç”¨</a>ã€æ–¹é¢çš„ä¸è¶³ä¹‹è™•ï¼Œå°¤å…¶æ˜¯é‡å° Poetry å’Œ pyenv åŒæ™‚ä½¿ç”¨æ™‚å¯èƒ½å‡ºç¾çš„å•é¡Œé€²è¡Œè¨è«–ã€‚é€™æ˜¯ç¬¬ä¸€ç¯‡æ‰€éºæ¼çš„å…§å®¹ã€‚</p>
<p>é€éæœ¬æ–‡ï¼Œæˆ‘å¸Œæœ›èƒ½å¤ æä¾›æ›´å…¨é¢ã€æ›´å¯¦ç”¨çš„ Poetry ä½¿ç”¨å»ºè­°ï¼Œè®“è®€è€…åœ¨ä½¿ç”¨ Poetry å’Œ pyenv æ™‚èƒ½å¤ å……åˆ†ç™¼æ®å®ƒå€‘çš„å„ªå‹¢ï¼Œä¸¦æ¸›å°‘ä¸å¿…è¦çš„å›°æƒ‘ã€‚</p>
<h3 id="ä»¥-poetry-demo-ç‚ºä¾‹"><a href="#ä»¥-poetry-demo-ç‚ºä¾‹" class="headerlink" title="ä»¥ poetry-demo ç‚ºä¾‹"></a>ä»¥ poetry-demo ç‚ºä¾‹</h3><p>poetry-demo æ˜¯æœ¬æ–‡ä½œç‚ºä¾‹ç¤ºçš„å°ˆæ¡ˆæ¨¡ç‰ˆï¼Œä½†æˆ‘å€‘ä¸æœƒå®‰è£å¤ªå¤šå¥—ä»¶ï¼Œåƒ…å„å–ä¸€å€‹ä½œç‚ºç¤ºç¯„ä¹‹ç”¨ã€‚</p>
<p>æœ‰ä¸€å€‹ç°¡å–®çš„å…·é«”å¯¦ä¾‹ï¼Œé‚„æ˜¯æ¯”æŠ½è±¡çš„æè¿°å®¹æ˜“ç†è§£å¾—å¤šã€‚</p>
<p>æˆ‘å€‘æœƒå¾ä¸€å°å…¨æ–°çš„ Linux VMï¼ˆUbuntu 20.04ï¼‰é–‹å§‹ï¼Œå…ˆå®‰è£ pyenvï¼Œå†å®‰è£ Poetryï¼Œç„¶å¾Œå†ä¸€èµ·ä½¿ç”¨å®ƒå€‘ï¼Œå»ºç«‹ Python å°ˆæ¡ˆèˆ‡è™›æ“¬ç’°å¢ƒã€‚</p>
<h3 id="ä½¿ç”¨çš„-Poetry-ç‰ˆæœ¬ï¼š1-5-1"><a href="#ä½¿ç”¨çš„-Poetry-ç‰ˆæœ¬ï¼š1-5-1" class="headerlink" title="ä½¿ç”¨çš„ Poetry ç‰ˆæœ¬ï¼š1.5.1"></a>ä½¿ç”¨çš„ Poetry ç‰ˆæœ¬ï¼š1.5.1</h3><p>Poetry åœ¨ 1.2 ç‰ˆå¾Œï¼Œå°æ–¼éƒ¨åˆ†æŒ‡ä»¤é€²è¡Œæœ‰è¼ƒå¤§çš„æ”¹å‹•èˆ‡æ“´å¼µï¼Œå°è‡´èˆŠæŒ‡ä»¤ä½¿ç”¨ä¸Šä¸å®Œå…¨ç›¸å®¹ï¼Œé€™æ¬¡æœƒæ¡ç”¨ç•¶å‰çš„æœ€æ–°ç‰ˆâ€”â€”<a target="_blank" rel="noopener" href="https://github.com/python-poetry/poetry/releases/tag/1.5.1">1.5.1</a>â€”â€”ä¾†é€²è¡Œç¤ºç¯„ã€‚</p>
<h3 id="ä½¿ç”¨çš„-pyenv-ç‰ˆæœ¬ï¼š2-3-18"><a href="#ä½¿ç”¨çš„-pyenv-ç‰ˆæœ¬ï¼š2-3-18" class="headerlink" title="ä½¿ç”¨çš„ pyenv ç‰ˆæœ¬ï¼š2.3.18"></a>ä½¿ç”¨çš„ pyenv ç‰ˆæœ¬ï¼š2.3.18</h3><p>pyenv åœ¨ v2.3.0 ä»¥å¾Œï¼Œå·²ç¶“<a target="_blank" rel="noopener" href="https://github.com/pyenv/pyenv#set-up-your-shell-environment-for-pyenv">å¤§å¹…ç°¡åŒ–äº†è¨­å®šæ“ä½œ</a>ï¼Œæ‰€ä»¥é€™è£¡ä¹Ÿæœ‰å¿…è¦å¼·èª¿ä¸€ä¸‹ä½¿ç”¨çš„ç‰ˆæœ¬ï¼š<a target="_blank" rel="noopener" href="https://github.com/pyenv/pyenv/releases/tag/v2.3.18">v2.3.18</a>ã€‚</p>
<p>ç›¸é—œæ–‡ç« ä¹Ÿæœ‰å°±æ–°ç‰ˆè¨­å®šå…§å®¹é€²è¡Œæ›´æ–°ï¼Œå¯åƒè€ƒã€ˆ<a href="https://blog.kyomind.tw/ubuntu-pyenv/#%E8%A8%AD%E5%AE%9A-pyenv">Ubuntu å®‰è£ä½¿ç”¨ pyenv + pyenv-virtualenv</a>ã€‰ã€‚</p>
<h2 id="å®‰è£-Poetryã€pyenvã€Python-3-10"><a href="#å®‰è£-Poetryã€pyenvã€Python-3-10" class="headerlink" title="å®‰è£ Poetryã€pyenvã€Python 3.10"></a>å®‰è£ Poetryã€pyenvã€Python 3.10</h2><p>è«‹ç›´æ¥åƒè€ƒã€ˆ<a href="https://blog.kyomind.tw/linux-dev-setup/">Linux Python é–‹ç™¼ç’°å¢ƒè¨­å®šï¼šzshã€zinitã€pyenvã€poetryã€docker</a>ã€‰ä¸­çš„ã€Œ<a href="https://blog.kyomind.tw/linux-dev-setup/#%E4%B8%89%E3%80%81%E8%A8%AD%E5%AE%9A-pyenv">ä¸‰ã€è¨­å®š pyenv</a>ã€ã€ã€Œ<a href="https://blog.kyomind.tw/linux-dev-setup/#%E5%9B%9B%E3%80%81%E8%A8%AD%E5%AE%9A-Poetry">å››ã€è¨­å®š Poetry</a>ã€éƒ¨åˆ†ã€‚</p>
<p>ä¸åªæ˜¯å®‰è£ï¼Œé‚„åŒ…æ‹¬è¨­å®š PATH ç­‰ç’°ç¯€ï¼Œé€™äº›æ­¥é©Ÿéƒ½æ˜¯å¿…è¦çš„ã€‚å®Œæˆé€™äº›æ­¥é©Ÿå¾Œï¼Œæˆ‘å€‘å°±æ“æœ‰äº† Poetry å’Œ pyenvã€‚</p>
<h3 id="é€é-pyenv-å®‰è£-Python-3-10-11"><a href="#é€é-pyenv-å®‰è£-Python-3-10-11" class="headerlink" title="é€é pyenv å®‰è£ Python 3.10.11"></a>é€é pyenv å®‰è£ Python 3.10.11</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyenv install 3.10.11</span><br></pre></td></tr></table></figure>

<p>pyenv æ˜¯ç‚ºäº†æ–¹ä¾¿æˆ‘å€‘ç®¡ç†å¤šå€‹ Python ç‰ˆæœ¬ï¼Œä¸‹é¢æˆ‘å€‘æœƒæ¢è¨ä¸åŒå°ˆæ¡ˆåˆ†åˆ¥ä½¿ç”¨å¤šå€‹ Python ç‰ˆæœ¬æ™‚çš„ Poetry + pyenv æ“ä½œæ³¨æ„äº‹é …ã€‚</p>
<p>é€™è£¡è‡³å°‘è¦å…ˆæœ‰ä¸€å€‹ Python ç‰ˆæœ¬ï¼Œæ‰èƒ½é †åˆ©å®‰è£æˆ‘å€‘çš„å°ˆæ¡ˆï¼Œåœ¨æ­¤ä»¥ <a target="_blank" rel="noopener" href="https://www.python.org/downloads/release/python-31011/">Python 3.10.11</a> ç‚ºä¾‹ã€‚</p>
<h2 id="Poetry-èˆ‡-pyenv-çš„éƒ¨åˆ†åŠŸèƒ½é‡ç–Š"><a href="#Poetry-èˆ‡-pyenv-çš„éƒ¨åˆ†åŠŸèƒ½é‡ç–Š" class="headerlink" title="Poetry èˆ‡ pyenv çš„éƒ¨åˆ†åŠŸèƒ½é‡ç–Š"></a>Poetry èˆ‡ pyenv çš„éƒ¨åˆ†åŠŸèƒ½é‡ç–Š</h2><p>å®‰è£å®Œå¾Œï¼Œæ˜¯å¦è¦è¨­å®š<code>pyenv local 3.10.11</code>æˆ–<code>pyenv global 3.10.11</code>ï¼Œå–æ±ºæ–¼ä½ æ˜¯å¦æœ‰ã€Œå¤šå°ˆæ¡ˆä¸”å¤šç¨® Python ç‰ˆæœ¬ã€éœ€æ±‚ã€‚</p>
<p>å¦‚æœåªéœ€è¦ä¸€ç¨® Python ç‰ˆæœ¬ï¼Œé‚£å°‡å…¶è¨­å®šç‚º<code>global</code>å·²è¶³ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyenv global 3.10.11</span><br></pre></td></tr></table></figure>

<p>å¦‚<a href="https://blog.kyomind.tw/linux-dev-setup/">å‰è¿°æ–‡ç« </a>æ‰€è¨€ï¼š</p>
<blockquote>
<p>å› ç‚º Poetry è‡ªå¸¶äº†è™›æ“¬ç’°å¢ƒç®¡ç†åŠŸèƒ½ï¼Œå®¹æ˜“å’Œ pyenv-virtualenvÂ <strong>ç–ŠåºŠæ¶å±‹</strong>ï¼Œå¾’å¢<strong>ç®¡ç†ä¸Šçš„æ··æ·†</strong>ï¼Œæ‰€ä»¥<strong>æˆ‘ç¾åœ¨ä¸€å¾‹åªä½¿ç”¨ Poetry + venv ä¾†ç®¡ç† Python è™›æ“¬ç’°å¢ƒ</strong>ã€‚</p>
</blockquote>
<p>å³ä½¿åœ¨ä¸åŒå°ˆæ¡ˆéœ€è¦å¤šç‰ˆæœ¬ Python æƒ…æ³ä¸‹ï¼Œpyenv-virtualenv ä¹Ÿä¸æ˜¯å¿…é ˆã€‚åªè¦å–„ç”¨<code>pyenv local</code>å’Œ<code>poetry env use</code>å…©å¤§æŒ‡ä»¤å³å¯ã€‚</p>
<p>ç¶œä¸Šæ‰€è¿°ï¼Œé€™ä¹Ÿæ˜¯ç‚ºä»€éº¼æˆ‘èªç‚º Poetry çš„æ•™å­¸<strong>æ‡‰è©²æ¶µè“‹å° pyenv çš„æ•´åˆ</strong>ï¼Œå› ç‚ºåœ¨ã€Œè™›æ“¬ç’°å¢ƒç®¡ç†ã€æ–¹é¢ï¼Œå…©è€…çš„åŠŸèƒ½æœ‰ä¸€å®šé‡ç–Šã€‚</p>
<hr>
<p>å‰ç½®ä½œæ¥­ç¸½ç®—å¤§åŠŸå‘Šæˆï¼Œæˆ‘å€‘é–‹å§‹å»ºç«‹ poetry-demo å§ï¼</p>
<h2 id="ä¸€ã€åˆå§‹åŒ–-Poetry-å°ˆæ¡ˆ"><a href="#ä¸€ã€åˆå§‹åŒ–-Poetry-å°ˆæ¡ˆ" class="headerlink" title="ä¸€ã€åˆå§‹åŒ– Poetry å°ˆæ¡ˆ"></a>ä¸€ã€åˆå§‹åŒ– Poetry å°ˆæ¡ˆ</h2><p>å…ˆç¢ºèªä¸€ä¸‹ç•¶å‰çš„ Poetry ç‰ˆæœ¬ï¼Œä½¿ç”¨<code>poetry --version</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">â¯ poetry --version</span><br><span class="line">Poetry (version 1.4.2)</span><br></pre></td></tr></table></figure>

<p>æˆ‘çš„ Poetry æ˜¯ä¸€æ®µæ™‚é–“å‰å®‰è£çš„ 1.4.2ï¼Œéœ€è¦æ›´æ–°ä¸€ä¸‹ï¼Œä»¥ç¬¦åˆæœ¬æ–‡ä½¿ç”¨çš„ç‰ˆæœ¬ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">â¯ poetry self update</span><br><span class="line"></span><br><span class="line">Using version ^1.5.1 <span class="keyword">for</span> poetry</span><br><span class="line"></span><br><span class="line">Updating dependencies</span><br><span class="line">Resolving dependencies... (2.6s)</span><br><span class="line"></span><br><span class="line">Writing lock file</span><br><span class="line"></span><br><span class="line">Package operations: 0 installs, 5 updates, 0 removals</span><br><span class="line"></span><br><span class="line">  â€¢ Updating platformdirs (2.6.2 -&gt; 3.5.1)</span><br><span class="line">  â€¢ Updating poetry-core (1.5.2 -&gt; 1.6.1)</span><br><span class="line">  â€¢ Updating poetry-plugin-export (1.3.1 -&gt; 1.4.0)</span><br><span class="line">  â€¢ Updating virtualenv (20.21.1 -&gt; 20.23.0)</span><br><span class="line">  â€¢ Updating poetry (1.4.2 -&gt; 1.5.1)</span><br></pre></td></tr></table></figure>

<p>å› ç‚ºæ˜¯ä½¿ç”¨å…¨åŸŸå®‰è£ Poetryï¼Œä¸Šé¢çš„å¥—ä»¶æ›´æ–°è¨Šæ¯å’Œå°ˆæ¡ˆçš„è™›æ“¬ç’°å¢ƒç„¡é—œâ€”â€”ç•¢ç«Ÿæˆ‘å€‘æ ¹æœ¬éƒ½é‚„æ²’æœ‰ç‚ºå°ˆæ¡ˆå»ºç«‹å°ˆå±¬çš„ Python è™›æ“¬ç’°å¢ƒï¼</p>
<p>ä¹Ÿå¯ä»¥æŒ‡å®šè¦å‡ç´šçš„ç‰ˆæœ¬ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poetry self update 1.5.1</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨poetry-initåˆå§‹åŒ–å°ˆæ¡ˆ"><a href="#ä½¿ç”¨poetry-initåˆå§‹åŒ–å°ˆæ¡ˆ" class="headerlink" title="ä½¿ç”¨poetry initåˆå§‹åŒ–å°ˆæ¡ˆ"></a>ä½¿ç”¨<code>poetry init</code>åˆå§‹åŒ–å°ˆæ¡ˆ</h3><p>ç¢ºèªå®Œ Poetry ç‰ˆæœ¬ï¼Œé–‹å§‹å»ºç«‹å°ˆæ¡ˆï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> poetry-demo</span><br><span class="line"><span class="built_in">cd</span> poetry-demo</span><br><span class="line">poetry init</span><br></pre></td></tr></table></figure>

<p><code>poetry init</code>æœƒå‡ºç¾ä¸‹åˆ—äº’å‹•å¼è¨Šæ¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">This <span class="built_in">command</span> will guide you through creating your pyproject.toml config.</span><br><span class="line"></span><br><span class="line">Package name [poetry-demo]:</span><br><span class="line">Version [0.1.0]:</span><br><span class="line">Description []:</span><br><span class="line">Author [kyo &lt;odinxp@gmail.com&gt;, n to skip]:</span><br><span class="line">License []:</span><br><span class="line">Compatible Python versions [^3.8]:</span><br><span class="line"></span><br><span class="line">Would you like to define your main dependencies interactively? (<span class="built_in">yes</span>/no) [<span class="built_in">yes</span>] no</span><br><span class="line">Would you like to define your development dependencies interactively? (<span class="built_in">yes</span>/no) [<span class="built_in">yes</span>] no</span><br><span class="line">Generated file</span><br><span class="line"></span><br><span class="line">[tool.poetry]</span><br><span class="line">name = <span class="string">&quot;poetry-demo&quot;</span></span><br><span class="line">version = <span class="string">&quot;0.1.0&quot;</span></span><br><span class="line">description = <span class="string">&quot;&quot;</span></span><br><span class="line">authors = [<span class="string">&quot;kyo &lt;odinxp@gmail.com&gt;&quot;</span>]</span><br><span class="line">readme = <span class="string">&quot;README.md&quot;</span></span><br><span class="line">packages = [&#123;include = <span class="string">&quot;poetry_demo&quot;</span>&#125;]</span><br><span class="line"></span><br><span class="line">[tool.poetry.dependencies]</span><br><span class="line">python = <span class="string">&quot;^3.8&quot;</span></span><br><span class="line"></span><br><span class="line">[build-system]</span><br><span class="line">requires = [<span class="string">&quot;poetry-core&quot;</span>]</span><br><span class="line">build-backend = <span class="string">&quot;poetry.core.masonry.api&quot;</span></span><br><span class="line"></span><br><span class="line">Do you confirm generation? (<span class="built_in">yes</span>/no) [<span class="built_in">yes</span>]</span><br></pre></td></tr></table></figure>

<p>ä¸­é–“çš„ã€ŒWould you like to define your <strong>main&#x2F;development</strong> dependencies interactively?ã€å…©å€‹å•å¥ï¼Œæˆ‘éƒ½å›ç­”ã€Œnoã€ï¼Œæœ€å¾Œä¸€å€‹å‰‡æ˜¯ã€Œyesã€ã€‚</p>
<p>åˆå§‹åŒ–å¾Œçš„<code>pyproject.toml</code>å…§å®¹ï¼š</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[tool.poetry]</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;poetry-demo&quot;</span></span><br><span class="line"><span class="attr">version</span> = <span class="string">&quot;0.1.0&quot;</span></span><br><span class="line"><span class="attr">description</span> = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="attr">authors</span> = [<span class="string">&quot;kyo &lt;odinxp@gmail.com&gt;&quot;</span>]</span><br><span class="line"><span class="attr">readme</span> = <span class="string">&quot;README.md&quot;</span></span><br><span class="line"><span class="attr">packages</span> = [&#123;include = <span class="string">&quot;poetry_demo&quot;</span>&#125;]</span><br><span class="line"></span><br><span class="line"><span class="section">[tool.poetry.dependencies]</span></span><br><span class="line"><span class="attr">python</span> = <span class="string">&quot;^3.8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="section">[build-system]</span></span><br><span class="line"><span class="attr">requires</span> = [<span class="string">&quot;poetry-core&quot;</span>]</span><br><span class="line"><span class="attr">build-backend</span> = <span class="string">&quot;poetry.core.masonry.api&quot;</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°å…¶ä¸­æœ‰ä¸€è¡Œã€Œ<code>readme = &quot;README.md&quot;</code>ã€ï¼Œæ­¤æ™‚å°ˆæ¡ˆå¿…é ˆæœ‰<code>README.md</code>ï¼Œå¦å‰‡æœƒæ‰¾ä¸åˆ°æª”æ¡ˆã€‚æˆ‘éƒ½ç›´æ¥åˆªé™¤è©²è¡Œï¼Œæ¯”è¼ƒçœäº‹ã€‚</p>
<h3 id="ä½¿ç”¨poetry-newå¿«é€Ÿåˆå§‹åŒ–"><a href="#ä½¿ç”¨poetry-newå¿«é€Ÿåˆå§‹åŒ–" class="headerlink" title="ä½¿ç”¨poetry newå¿«é€Ÿåˆå§‹åŒ–"></a>ä½¿ç”¨<code>poetry new</code>å¿«é€Ÿåˆå§‹åŒ–</h3><p>è¦é”åˆ°å°ˆæ¡ˆåˆå§‹åŒ–çš„æ•ˆæœï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ç”¨<code>poetry new poetry-demo</code>æŒ‡ä»¤ï¼Œæ›´å¿«é€Ÿï¼ä¸éå®ƒä¹Ÿæœƒå¹«ä½ åšã€Œæ›´å¤šäº‹ã€ï¼Œç´°ç¯€è«‹åƒè€ƒ<a target="_blank" rel="noopener" href="https://python-poetry.org/docs/basic-usage/#project-setup">æ–‡ä»¶</a>ã€‚</p>
<h2 id="äºŒã€ç‚ºå°ˆæ¡ˆå»ºç«‹-Python-è™›æ“¬ç’°å¢ƒ"><a href="#äºŒã€ç‚ºå°ˆæ¡ˆå»ºç«‹-Python-è™›æ“¬ç’°å¢ƒ" class="headerlink" title="äºŒã€ç‚ºå°ˆæ¡ˆå»ºç«‹ Python è™›æ“¬ç’°å¢ƒ"></a>äºŒã€ç‚ºå°ˆæ¡ˆå»ºç«‹ Python è™›æ“¬ç’°å¢ƒ</h2><p>é€™è£¡æ˜¯ã€Œé‡é ­æˆ²ã€ä¹‹ä¸€ï¼Œä½†åšæ³•ä¸Šä¸¦ä¸æ˜¯é‚£éº¼ã€Œç›´è§€ã€ï¼Œå¸¸å¸¸å®¹æ˜“è®“äººæ··æ·†ã€‚åƒ…ä½¿ç”¨ pyenv çš„å‰æä¸‹ï¼Œå†å®‰è£<code>pyenv-virtualenv</code>ä¾†å»ºç«‹è™›æ“¬ç’°å¢ƒï¼Œç¢ºå¯¦ä¸é›£ã€‚</p>
<p>ä½†ç¾åœ¨æœ‰äº† Poetryï¼Œå…©è€…çš„æ­é…ä½¿ç”¨æ–¹å¼å°±å¾ˆé‡è¦ï¼Œé€™ä¹Ÿæ˜¯ç‚ºä»€éº¼æˆ‘ä¸€å†å¼·èª¿ï¼Œæœ‰äº† Poetryï¼Œä¹¾è„†å°±ä¸è¦å†è£<code>pyenv-virtualenv</code>äº†ã€‚</p>
<h3 id="ä½¿ç”¨-Poetry-å»ºç«‹è™›æ“¬ç’°å¢ƒ"><a href="#ä½¿ç”¨-Poetry-å»ºç«‹è™›æ“¬ç’°å¢ƒ" class="headerlink" title="ä½¿ç”¨ Poetry å»ºç«‹è™›æ“¬ç’°å¢ƒ"></a>ä½¿ç”¨ Poetry å»ºç«‹è™›æ“¬ç’°å¢ƒ</h3><p>åœ¨ç¬¬ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œé›–ç„¶æˆ‘æé<code>poetry shell</code>æœ‰æ™‚å€™å¯ä»¥æ›¿ä»£<code>poetry env use</code>ï¼Œä½œç‚ºå¿«é€Ÿå»ºç«‹è™›æ“¬ç’°å¢ƒçš„ä¾¿æ·æ‰‹æ®µã€‚</p>
<p>ä½†æ˜¯ï¼Œç•¶ä½ é‚„æ²’æœ‰ç‚ºå°ˆæ¡ˆå»ºç«‹è™›æ“¬ç’°å¢ƒï¼Œä¸”ä½œæ¥­ç³»çµ±ä¸­åŒ…å«äº†ä¸æ­¢ä¸€å€‹ Python ç‰ˆæœ¬æ™‚ï¼Œå»ºè­°å°±ä¸è¦ç”¨<code>poetry shell</code>ä¾†å»ºç«‹è™›æ“¬ç’°å¢ƒâ€”â€”å› ç‚ºå®ƒå¾ˆå¯èƒ½æœƒé¸æ“‡ä¸æ˜¯ä½ è¦çš„ Python ç‰ˆæœ¬ã€‚</p>
<p>å„˜ç®¡æˆ‘å€‘ä½¿ç”¨ pyenv ä¾†ç®¡ç† Pythonï¼Œä½†å®Œæ•´çš„ Linux ç™¼è¡Œç‰ˆå¾€å¾€éƒ½è‡ªå¸¶äº†ç³»çµ±çš„ Pythonã€‚æ¯”å¦‚æˆ‘çš„ Ubuntu å°±è‡ªå¸¶äº† 3.8.xï¼Œé€™æ­£æ˜¯ç‚ºä½•ä¸Šé¢<code>pyproject.toml</code>æœƒæœ‰ä¸€è¡Œã€Œ<code>python = &quot;^3.8&quot;</code>ã€è€Œä¸æ˜¯<code>^3.10</code>â€”â€”å› ç‚º Poetry åµæ¸¬åˆ°çš„æ˜¯ç³»çµ±é è¨­çš„ Pythonï¼Œè€Œä¸æ˜¯ pyenv çš„ Poetryã€‚</p>
<p>æ›å¥è©±èªªï¼Œç„¡è«–é€é pyenv å®‰è£äº†å¹¾å€‹ Python ç‰ˆæœ¬ï¼Œ<strong>é€™äº›è³‡è¨Šå° Poetry è€Œè¨€ï¼Œä»å¯èƒ½æ˜¯é™Œç”Ÿçš„ã€‚</strong></p>
<p>ç‚ºäº†è®“ Poetry åœ¨å»ºç«‹è™›æ“¬ç’°å¢ƒæ™‚ï¼Œèƒ½ç¢ºå¯¦ä½¿ç”¨<strong>ä½ æƒ³è¦çš„ Python ç‰ˆæœ¬</strong>ï¼Œæˆ‘å€‘å¿…é ˆå–„ç”¨<code>poetry env use</code>æŒ‡ä»¤æ‰è¡Œã€‚</p>
<h2 id="ä¸‰ã€ç¢ºå®šå°ˆæ¡ˆä½¿ç”¨çš„-Python-ç‰ˆæœ¬"><a href="#ä¸‰ã€ç¢ºå®šå°ˆæ¡ˆä½¿ç”¨çš„-Python-ç‰ˆæœ¬" class="headerlink" title="ä¸‰ã€ç¢ºå®šå°ˆæ¡ˆä½¿ç”¨çš„ Python ç‰ˆæœ¬"></a>ä¸‰ã€ç¢ºå®šå°ˆæ¡ˆä½¿ç”¨çš„ Python ç‰ˆæœ¬</h2><p>ç¬¬ä¸€ç¯‡æ–‡ç« ä¸­ä¹Ÿæåˆ°ï¼š</p>
<blockquote>
<p>æˆ‘è¦ºå¾—å­¸ç¿’ Poetry çš„<strong>ç¬¬ä¸€é“é—œå¡</strong>ï¼Œå°±æ˜¯å®ƒå°æ–¼<strong>è™›æ“¬ç’°å¢ƒ</strong>çš„ç®¡ç†ã€‚</p>
</blockquote>
<p>ç¾åœ¨çœ‹ä¾†ä¸€é»ä¹Ÿæ²’éŒ¯ï¼</p>
<h3 id="æŒ‡å®šè™›æ“¬ç’°å¢ƒ-Python-ç‰ˆæœ¬çš„æ¨™æº–åšæ³•"><a href="#æŒ‡å®šè™›æ“¬ç’°å¢ƒ-Python-ç‰ˆæœ¬çš„æ¨™æº–åšæ³•" class="headerlink" title="æŒ‡å®šè™›æ“¬ç’°å¢ƒ Python ç‰ˆæœ¬çš„æ¨™æº–åšæ³•"></a>æŒ‡å®šè™›æ“¬ç’°å¢ƒ Python ç‰ˆæœ¬çš„æ¨™æº–åšæ³•</h3><p>åœ¨ä½¿ç”¨ pyenv çš„æƒ…æ³ä¸‹ï¼Œ<a target="_blank" rel="noopener" href="https://python-poetry.org/docs/managing-environments/">Poetry å®˜æ–¹æ–‡ä»¶</a>æœ‰è£œå……ä¸€å€‹è®“ä½ èƒ½ã€Œç¢ºå®šã€è™›æ“¬ç’°å¢ƒæœƒä½¿ç”¨çš„ Python ç‰ˆæœ¬çš„åšæ³•ï¼š</p>
<blockquote>
<p>If you use a tool likeÂ <strong><a target="_blank" rel="noopener" href="https://github.com/pyenv/pyenv">pyenv</a></strong>Â to manage different Python versions, you can set the <strong>experimental</strong> <code>virtualenvs.prefer-active-python</code>Â option toÂ <code>true</code>. Poetry will then try to find the currentÂ <code>python</code>Â of your shell.</p>
</blockquote>
<p>å…¶ä¸­çš„ã€Œexperimentalã€è¡¨ç¤ºé€™æ˜¯ä¸€å€‹å¯¦é©—æ€§åŠŸèƒ½ã€‚æ‰€ä»¥æˆ‘ä¸åå¥½é€™å€‹åšæ³•ã€‚</p>
<blockquote>
<p>For instance, if your project requires a newer Python than is available with your system, a standard workflow would be:</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pyenv install 3.9.8</span><br><span class="line">pyenv <span class="built_in">local</span> 3.9.8  <span class="comment"># Activate Python 3.9 for the current project</span></span><br><span class="line">poetry install</span><br></pre></td></tr></table></figure>

<p>ä¸»è¦åˆ†æˆå…©å€‹æ­¥é©Ÿï¼š</p>
<ol>
<li>å°‡<code>virtualenvs.prefer-active-python</code>è¨­ç‚º<code>true</code>ã€‚</li>
<li>ä½¿ç”¨ pyenv çš„<code>pyenv local</code>æŒ‡ä»¤ã€‚</li>
</ol>
<h3 id="æˆ‘åå¥½çš„åšæ³•ï¼špoetry-env-use"><a href="#æˆ‘åå¥½çš„åšæ³•ï¼špoetry-env-use" class="headerlink" title="æˆ‘åå¥½çš„åšæ³•ï¼špoetry env use"></a>æˆ‘åå¥½çš„åšæ³•ï¼š<code>poetry env use</code></h3><p>å¦‚æœä½ åªç¢ºå®šéœ€è¦ã€Œ<strong>ä¸€å€‹</strong>ã€Python ç‰ˆæœ¬ï¼Œä¸”å·²ç¶“å°‡å…¶è¨­å®šç‚º<code>global</code>ï¼Œé‚£éº¼å‰è¿°çš„<code>virtualenvs.prefer-active-python</code>è¨­å®šï¼Œæˆ–å¯çœç•¥ã€‚</p>
<p><code>poetry env use</code>æœ‰ä¸‹åˆ—å¹¾ç¨®ç”¨æ³•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poetry <span class="built_in">env</span> use /full/path/to/python</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poetry <span class="built_in">env</span> use python</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poetry <span class="built_in">env</span> use python3.7</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poetry <span class="built_in">env</span> use 3.7</span><br></pre></td></tr></table></figure>

<p>å¾Œä¸‰è€…çš„<code>python</code>ã€<code>python3.7</code>æˆ–<code>3.7</code>ï¼Œéƒ½å’Œä½ çš„<code>PATH</code>æœ‰é—œã€‚</p>
<p>æ›å¥è©±èªªï¼Œå¦‚æœä½ åœ¨çµ‚ç«¯æ©Ÿæ‰“<code>python3.7</code>ï¼Œæœ‰æˆåŠŸé€²å…¥ã€Œ<a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-tw/visualstudio/python/python-interactive-repl-in-visual-studio?view=vs-2022">Python äº’å‹•å¼è¦–çª—</a>ã€ï¼Œé‚£å°±è¡¨ç¤ºé€™å€‹ç‰ˆæœ¬çš„ Python ç¢ºå¯¦å­˜åœ¨<code>PATH</code>ä¸­ã€‚</p>
<h3 id="ä½¿ç”¨whichæŒ‡ä»¤ç¢ºèª-Python-ç‰ˆæœ¬æ˜¯å¦å­˜åœ¨PATHä¸­"><a href="#ä½¿ç”¨whichæŒ‡ä»¤ç¢ºèª-Python-ç‰ˆæœ¬æ˜¯å¦å­˜åœ¨PATHä¸­" class="headerlink" title="ä½¿ç”¨whichæŒ‡ä»¤ç¢ºèª Python ç‰ˆæœ¬æ˜¯å¦å­˜åœ¨PATHä¸­"></a>ä½¿ç”¨<code>which</code>æŒ‡ä»¤ç¢ºèª Python ç‰ˆæœ¬æ˜¯å¦å­˜åœ¨<code>PATH</code>ä¸­</h3><p>ä¸æƒ³é€²å…¥ REPLï¼Œåªæƒ³ç¢ºèª Python ç‰ˆæœ¬æ˜¯å¦å­˜åœ¨<code>PATH</code>ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>which</code>æŒ‡ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">â¯ <span class="built_in">which</span> python3.9</span><br><span class="line">/home/kyo/.pyenv/shims/python3.9</span><br><span class="line">â¯ <span class="built_in">which</span> python3.10</span><br><span class="line">/home/kyo/.pyenv/shims/python3.10</span><br><span class="line">â¯ <span class="built_in">which</span> python</span><br><span class="line">/home/kyo/.pyenv/shims/python</span><br></pre></td></tr></table></figure>

<p>è°æ˜çš„ä½ æ‡‰è©²çŒœåˆ°äº†ï¼Œæˆ‘å€‘åªè¦ç¢ºä¿ Python ç‰ˆæœ¬å·²å­˜åœ¨æ–¼<code>PATH</code>ï¼Œé€é<code>poetry env use &lt;æŒ‡å®šçš„pythonç‰ˆæœ¬&gt;</code>å³å¯ç¢ºå®šå°ˆæ¡ˆä½¿ç”¨çš„ Python ç‰ˆæœ¬ã€‚</p>
<p>ä¸éï¼Œé€™å€‹<code>&lt;æŒ‡å®šçš„pythonç‰ˆæœ¬&gt;</code>å¿…é ˆè¦å…ˆé€é pyenv å®‰è£å¥½ï¼Œ<strong>è€Œä¸”ä½ é€šå¸¸è¦å°‡å…¶è¨­å®šç‚º<code>global</code>æˆ–<code>local</code>ï¼Œç³»çµ±æ‰æ‰¾å¾—åˆ°ã€‚</strong></p>
<h3 id="poetry-demo-æ“ä½œ"><a href="#poetry-demo-æ“ä½œ" class="headerlink" title="poetry-demo æ“ä½œ"></a>poetry-demo æ“ä½œ</h3><p>å›åˆ°æ¡ˆä¾‹ï¼Œé€™è£¡æˆ‘å€‘å·²ç¶“å°‡ 3.10.11 è¨­ç‚º<code>global</code>ã€‚æ‰€ä»¥è¼¸å…¥<code>python3.10</code>æŒ‡ä»¤æ™‚ï¼Œæœƒé€²å…¥äº’å‹•å¼è¦–çª—ã€‚</p>
<p>æ­¤æ™‚åªè¦ä½¿ç”¨ä¸‹åˆ—æŒ‡ä»¤ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥ç¢ºå®šä½¿ç”¨çš„ Python ç‰ˆæœ¬ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poetry <span class="built_in">env</span> use 3.10.11</span><br></pre></td></tr></table></figure>

<p>å› ç‚ºå·²ç¶“æœ‰è¨­å®š<code>global</code>ï¼Œå–®ç´”ä½¿ç”¨<code>poetry env use python</code>æ‡‰è©²ä¹Ÿæ˜¯å¯ä»¥æˆåŠŸå¥—ç”¨ 3.10ã€‚ä½†ä¿éšªèµ·è¦‹ï¼Œä½¿ç”¨æŒ‡ä»¤æ™‚é‚„æ˜¯å»ºè­°è¼¸å…¥<strong>å®Œæ•´çš„ç‰ˆæœ¬è™Ÿ</strong>ï¼ŒåŒ…æ‹¬å°¾ç¶´çš„<code>.11</code></p>
<h2 id="å››ã€ä¸åŒå°ˆæ¡ˆä½¿ç”¨ä¸åŒ-Python-ç‰ˆæœ¬"><a href="#å››ã€ä¸åŒå°ˆæ¡ˆä½¿ç”¨ä¸åŒ-Python-ç‰ˆæœ¬" class="headerlink" title="å››ã€ä¸åŒå°ˆæ¡ˆä½¿ç”¨ä¸åŒ Python ç‰ˆæœ¬"></a>å››ã€ä¸åŒå°ˆæ¡ˆä½¿ç”¨ä¸åŒ Python ç‰ˆæœ¬</h2><p>å³ä½¿æœ‰ã€Œå¤šå°ˆæ¡ˆå¤š Python ç‰ˆæœ¬ã€éœ€æ±‚ï¼Œä¹Ÿæœªå¿…è¦è®Šæ›´å‰è¿°çš„<code>virtualenvs.prefer-active-python</code>è¨­å®šã€‚</p>
<p>é€é<code>pyenv local</code>+<code>poetry env use</code>ï¼Œå¯ä»¥ç‚ºä¸åŒå°ˆæ¡ˆè¨­å®šä¸åŒçš„ Python ç‰ˆæœ¬ã€‚</p>
<p>å‡è¨­ä½ æœ‰ aã€bã€c ä¸‰å€‹å°ˆæ¡ˆï¼Œåˆ†åˆ¥è¦ä½¿ç”¨ Python 3.7.11ã€3.9.12ã€3.10.11ï¼Œä¾ç…§å‰æ®µä»‹ç´¹ï¼Œæˆ‘å€‘å¯ä»¥é€™éº¼åšã€‚</p>
<p>é¦–å…ˆï¼Œ<code>pyenv versions</code>ç¢ºèªé€™ä¸‰å€‹ç‰ˆæœ¬çš„ Python éƒ½å·²ç¶“ç”± pyenv å®‰è£å®Œæˆï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">â¯ pyenv versions</span><br><span class="line">  system</span><br><span class="line">  3.7.11</span><br><span class="line">  3.9.12</span><br><span class="line">* 3.10.11 (<span class="built_in">set</span> by /home/kyo/.pyenv/version)</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹ä¾†å°±å¾ˆç°¡å–®äº†ï¼Œç‚ºå„å°ˆæ¡ˆè¨­å®šå¥½<code>pyenv local</code>ï¼ˆå¥½è®“<code>PATH</code>å¯ä»¥æˆåŠŸæ‰¾åˆ°å°æ‡‰çš„ Python åŸ·è¡Œæª”ï¼‰ï¼Œç„¶å¾Œå†<code>poetry env use &lt;æŒ‡å®šçš„pythonç‰ˆæœ¬&gt;</code>ã€‚</p>
<p>å‡è¨­ b å°ˆæ¡ˆè¦ä½¿ç”¨ 3.9.12ï¼Œå‰‡åšæ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> b</span><br><span class="line">pyenv <span class="built_in">local</span> 3.9.12</span><br><span class="line">poetry <span class="built_in">env</span> use 3.9.12</span><br></pre></td></tr></table></figure>

<p>å…¶é¤˜å°ˆæ¡ˆä»¥æ­¤é¡æ¨ã€‚</p>
<h2 id="äº”ã€å¦‚ä½•ç§»é™¤-Poetry-è™›æ“¬ç’°å¢ƒï¼Ÿ"><a href="#äº”ã€å¦‚ä½•ç§»é™¤-Poetry-è™›æ“¬ç’°å¢ƒï¼Ÿ" class="headerlink" title="äº”ã€å¦‚ä½•ç§»é™¤ Poetry è™›æ“¬ç’°å¢ƒï¼Ÿ"></a>äº”ã€å¦‚ä½•ç§»é™¤ Poetry è™›æ“¬ç’°å¢ƒï¼Ÿ</h2><p>åƒè€ƒ<a target="_blank" rel="noopener" href="https://python-poetry.org/docs/managing-environments/#deleting-the-environments">æ–‡ä»¶</a>ï¼Œæ¨™æº–åšæ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">poetry <span class="built_in">env</span> remove /full/path/to/python</span><br><span class="line">poetry <span class="built_in">env</span> remove python3.7</span><br><span class="line">poetry <span class="built_in">env</span> remove 3.7</span><br><span class="line">poetry <span class="built_in">env</span> remove test-O3eWbxRl-py3.7</span><br></pre></td></tr></table></figure>

<p>ç„¶è€Œï¼Œå› ç‚ºæˆ‘å€‘å·²ç¶“å°‡<code>virtualenvs.in-project</code>æ”¹è¨­ç‚º<code>true</code>ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥åœ¨å°ˆæ¡ˆä¸­å»ºç«‹åç‚º<code>.venv</code>çš„è™›æ“¬ç’°å¢ƒã€‚</p>
<p>ä¸Šè¿°çš„æŒ‡ä»¤åŸºæœ¬éƒ½æ²’æœ‰ä½œç”¨äº†ã€‚</p>
<blockquote>
<p>ä½†æˆ‘å°±çœŸçš„éœ€è¦ç æ‰é‡ç·´å•Šï¼æ€éº¼è¾¦ï¼Ÿ</p>
</blockquote>
<h3 id="å…©å€‹æ–¹æ³•"><a href="#å…©å€‹æ–¹æ³•" class="headerlink" title="å…©å€‹æ–¹æ³•"></a>å…©å€‹æ–¹æ³•</h3><p>æ­¤æ™‚é‚„æœ‰å…©å€‹ç°¡å–®çš„æ–¹æ³•å¯ç”¨ã€‚</p>
<p>æ–¹æ³•ä¸€ï¼Œå°±æ˜¯ç›´æ¥ç æ‰<code>.venv</code>ï¼Œç°¡å–®æœ‰æ•ˆï¼</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf .venv</span><br></pre></td></tr></table></figure>

<p>æ–¹æ³•äºŒï¼Œæˆ‘å€‘ä¾èˆŠå¯ä»¥ä½¿ç”¨ä¸‹åˆ—æŒ‡ä»¤ï¼Œå„ªé›…åœ°ç§»é™¤å®ƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">â¯ poetry <span class="built_in">env</span> remove --all</span><br><span class="line">Deleted virtualenv: /home/kyo/poetry-demo/.venv</span><br></pre></td></tr></table></figure>

<hr>
<p>å…‰å°ˆæ¡ˆåˆå§‹åŒ–èˆ‡è™›æ“¬ç’°å¢ƒç®¡ç†å°±ç”¨æ‰äº† 5 å€‹ h2 æ¨™é¡Œï¼Œå¯è¦‹å…¶è¤‡é›œã€‚ç¾åœ¨ï¼Œæˆ‘å€‘é€²å…¥ç¬¬äºŒéƒ¨åˆ†â€”â€”å¥—ä»¶çš„å®‰è£èˆ‡ç®¡ç†ã€‚</p>
<h2 id="å…­ã€å®‰è£å¥—ä»¶è‡³-main-dependencies"><a href="#å…­ã€å®‰è£å¥—ä»¶è‡³-main-dependencies" class="headerlink" title="å…­ã€å®‰è£å¥—ä»¶è‡³ main dependencies"></a>å…­ã€å®‰è£å¥—ä»¶è‡³ main dependencies</h2><p>ä½¿ç”¨<code>poetry add</code>æŒ‡ä»¤ã€‚</p>
<p>åƒè€ƒ<a target="_blank" rel="noopener" href="https://python-poetry.org/docs/cli/#add">æ–‡ä»¶</a>ï¼Œå¯ä»¥ç™¼ç¾<code>add</code>æŒ‡ä»¤çš„ç”¨æ³•é‚„æŒºå¤šå…ƒçš„ï¼</p>
<p>æˆ‘è¦ºå¾—å°ä¸€èˆ¬ä½¿ç”¨è€…è€Œè¨€ï¼Œ<code>poetry add</code>æœ‰å…©å€‹é‡é»ï¼š</p>
<ol>
<li>äº†è§£<code>poetry add</code>çš„ã€Œå¤šéšæ®µè¡Œç‚ºã€ã€‚</li>
<li>äº†è§£<code>--group</code>åƒæ•¸ç”¨æ³•ã€‚</li>
</ol>
<h3 id="é‡é»ä¸€ï¼špoetry-addå¤šéšæ®µè¡Œç‚º"><a href="#é‡é»ä¸€ï¼špoetry-addå¤šéšæ®µè¡Œç‚º" class="headerlink" title="é‡é»ä¸€ï¼špoetry addå¤šéšæ®µè¡Œç‚º"></a>é‡é»ä¸€ï¼š<code>poetry add</code>å¤šéšæ®µè¡Œç‚º</h3><p>å¦‚ä¸Šç¯‡æ–‡ç« æ‰€è¨€ï¼Œ<code>poetry add</code>å¯¦éš›ä¸Šæœƒåš 3 ä»¶äº‹ï¼Œä¾åºç‚ºï¼š</p>
<ol>
<li>æ›´æ–°<code>pyproject.toml</code>ã€‚</li>
<li>ä¾ç…§<code>pyproject.toml</code>çš„å…§å®¹ï¼Œæ›´æ–°<code>poetry.lock</code>ã€‚ï¼ˆç›¸ç•¶æ–¼<code>poetry lock</code>ï¼‰</li>
<li>ä¾ç…§<code>poetry.lock</code>çš„å…§å®¹ï¼Œæ›´æ–°è™›æ“¬ç’°å¢ƒã€‚ï¼ˆç›¸ç•¶æ–¼<code>poetry install</code>ï¼‰</li>
</ol>
<blockquote>
<p>ç‚ºä»€éº¼çŸ¥é“é€™å€‹å¾ˆé‡è¦ï¼Ÿ</p>
</blockquote>
<p>å› ç‚ºç•¶ä½ ä¸æ˜¯ä½¿ç”¨<code>poetry add</code>æŒ‡ä»¤ï¼Œè€Œæ˜¯ç›´æ¥ä¿®æ”¹<code>pyproject.toml</code>æ™‚ï¼Œæ­¤æ™‚ä¸Šè¿°çš„ç¬¬ 2ã€3 æ­¥<strong>éƒ½ä¸æœƒè‡ªå‹•åŸ·è¡Œ</strong>ã€‚</p>
<p>ä½†é€šå¸¸ä½ æ‰‹å‹•ä¿®æ”¹ toml æª”æœ€çµ‚éƒ½æ˜¯ç‚ºäº†è®Šæ›´è™›æ“¬ç’°å¢ƒï¼Œæ‰€ä»¥æ›´æ–°å®Œ<code>pyproject.toml</code>å¾Œï¼Œæˆ‘å€‘é‚„è¦å†ä½¿ç”¨<code>poetry lock</code>èˆ‡<code>poetry install</code>æŒ‡ä»¤æ‰è¡Œï¼</p>
<p>å°æ–¼ä¸ç†Ÿæ‚‰ä¸Šè¿°æµç¨‹çš„åˆå­¸è€…ï¼Œå¾ˆå®¹æ˜“éºæ¼ï¼Œä¸¦æ„Ÿåˆ°å›°æƒ‘ã€‚</p>
<h3 id="é‡é»äºŒï¼š-group"><a href="#é‡é»äºŒï¼š-group" class="headerlink" title="é‡é»äºŒï¼š--group"></a>é‡é»äºŒï¼š<code>--group</code></h3><p><strong>èˆŠç‰ˆ</strong>ï¼ˆ1.1.xï¼‰åªæœ‰ main å’Œ dev å…©ç¨®ä¾è³´ç’°å¢ƒè¨­å®šï¼Œ<strong>æ–°ç‰ˆ</strong>ï¼ˆ1.2.0ï¼‰å¢åŠ äº†<code>--group</code>åƒæ•¸ï¼Œè®“ä½ å¯ä»¥é™¤äº† main å’Œ dev å¤–ï¼Œé‚„æœ‰èƒ½è‡ªè¨‚å¤šç¨® groupï¼Œå¢åŠ ä½¿ç”¨ä¸Šçš„å½ˆæ€§ã€‚</p>
<p>æ¯”å¦‚å¯ä»¥å‘½åä¸åŒçš„ç¾¤çµ„å¦‚ä¸‹ï¼š</p>
<ul>
<li>test</li>
<li>dev</li>
<li>prod</li>
</ul>
<p>åŸºæœ¬èªæ³•ï¼ˆå¾ŒçºŒé‚„æœƒæåŠï¼‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poetry add pytest --group dev</span><br></pre></td></tr></table></figure>

<p>åœ¨æ–°ç‰ˆï¼ˆ1.2ï¼‰çš„<code>pyproject.toml</code>ä¸­æœƒå¦‚æ­¤è¨˜è¼‰ï¼š</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[tool.poetry.group.dev.dependencies]</span></span><br><span class="line"><span class="attr">pytest</span> = <span class="string">&quot;^6.0.0&quot;</span></span><br><span class="line"><span class="attr">pytest-mock</span> = <span class="string">&quot;*&quot;</span></span><br></pre></td></tr></table></figure>

<p>è€ŒèˆŠç‰ˆå‰‡æ˜¯ï¼š</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Poetry pre-1.2.x style, understood by Poetry 1.0â€“1.2</span></span><br><span class="line"><span class="section">[tool.poetry.dev-dependencies]</span></span><br><span class="line"><span class="attr">pytest</span> = <span class="string">&quot;^6.0.0&quot;</span></span><br><span class="line"><span class="attr">pytest-mock</span> = <span class="string">&quot;*&quot;</span></span><br></pre></td></tr></table></figure>

<p>å…©è€…çš„<strong>å·®ç•°</strong>ï¼Œæ˜¯ç‰ˆæœ¬éæ¸¡æ™‚è¦ç‰¹åˆ¥æ³¨æ„çš„ã€‚</p>
<p>é›–ç„¶å½ˆæ€§è®Šå¤§ï¼Œä½†æˆ‘å€‹äººç›®å‰é‚„æ˜¯åªæœ‰ä½¿ç”¨ main å’Œ dev è€Œå·²ã€‚</p>
<h3 id="poetry-demo-æ“ä½œ-1"><a href="#poetry-demo-æ“ä½œ-1" class="headerlink" title="poetry-demo æ“ä½œ"></a>poetry-demo æ“ä½œ</h3><p>è‡³æ­¤ï¼Œæˆ‘å€‘ä¹Ÿå®‰è£ Django 3.2.x è‡³ main dependencies ä¸­ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">â¯ poetry add django@^3.2</span><br><span class="line"></span><br><span class="line">Updating dependencies</span><br><span class="line">Resolving dependencies... (0.5s)</span><br><span class="line"></span><br><span class="line">Package operations: 5 installs, 0 updates, 0 removals</span><br><span class="line"></span><br><span class="line">  â€¢ Installing typing-extensions (4.6.3)</span><br><span class="line">  â€¢ Installing asgiref (3.7.2)</span><br><span class="line">  â€¢ Installing pytz (2023.3)</span><br><span class="line">  â€¢ Installing sqlparse (0.4.4)</span><br><span class="line">  â€¢ Installing django (3.2.19)</span><br><span class="line"></span><br><span class="line">Writing lock file</span><br></pre></td></tr></table></figure>

<p>é€™å€‹<code>@</code>ç¬¦è™Ÿï¼ˆé‹ç®—å­ï¼‰è¦æ€éº¼ç”¨ï¼Œè«‹åƒè€ƒ<a target="_blank" rel="noopener" href="https://python-poetry.org/docs/dependency-specification/#using-the--operator">æ–‡ä»¶</a>ã€‚</p>
<h2 id="ä¸ƒã€å®‰è£å¥—ä»¶è‡³-dev-dependencies"><a href="#ä¸ƒã€å®‰è£å¥—ä»¶è‡³-dev-dependencies" class="headerlink" title="ä¸ƒã€å®‰è£å¥—ä»¶è‡³ dev dependencies"></a>ä¸ƒã€å®‰è£å¥—ä»¶è‡³ dev dependencies</h2><p>ä¸Šç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å€‘å·²ç¶“æ¢è¨éã€Œ<a href="https://blog.kyomind.tw/python-poetry/#%E6%96%B0%E5%A2%9E%E5%A5%97%E4%BB%B6%E8%87%B3-dev-dependencies">æ˜ç¢ºå€åˆ†é–‹ç™¼ç’°å¢ƒå°ˆç”¨çš„å¥—ä»¶</a>ã€çš„é‡è¦æ€§ã€‚</p>
<p>èˆŠç‰ˆçš„æŒ‡ä»¤æ˜¯é€™æ¨£çš„ï¼Œä»¥<code>black</code>ç‚ºä¾‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">poetry add black --dev</span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line">poetry add black -D</span><br></pre></td></tr></table></figure>

<p>ç„¶è€Œ<code>--dev (-D)</code>åœ¨æ–°ç‰ˆ<a target="_blank" rel="noopener" href="https://python-poetry.org/docs/cli/#options-4">å·²æ£„ç”¨</a>ï¼š</p>
<blockquote>
<p>â€¢ <code>--dev (-D)</code>: Add package as development dependency. (Deprecated, useÂ <code>-G dev</code>Â instead)</p>
</blockquote>
<p>å› ç‚ºåŠ å…¥äº† group æ©Ÿåˆ¶ï¼Œæ–°ç‰ˆçš„æŒ‡ä»¤ç•¥æœ‰ä¸åŒï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">poetry add black --group dev</span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line">poetry add black -G dev</span><br></pre></td></tr></table></figure>

<p>è¬›ç™½äº†å°±æ˜¯è®Šå›‰å—¦äº†ä¸€é»ã€‚</p>
<p>æ­¤æ™‚çš„ toml æª”å…§å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[tool.poetry]</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;poetry-demo&quot;</span></span><br><span class="line"><span class="attr">version</span> = <span class="string">&quot;0.1.0&quot;</span></span><br><span class="line"><span class="attr">description</span> = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="attr">authors</span> = [<span class="string">&quot;kyo &lt;odinxp@gmail.com&gt;&quot;</span>]</span><br><span class="line"><span class="attr">packages</span> = [&#123;include = <span class="string">&quot;poetry_demo&quot;</span>&#125;]</span><br><span class="line"></span><br><span class="line"><span class="section">[tool.poetry.dependencies]</span></span><br><span class="line"><span class="attr">python</span> = <span class="string">&quot;^3.8&quot;</span></span><br><span class="line"><span class="attr">django</span> = <span class="string">&quot;^3.2&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="section">[tool.poetry.group.dev.dependencies]</span></span><br><span class="line"><span class="attr">black</span> = <span class="string">&quot;^23.3.0&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="section">[build-system]</span></span><br><span class="line"><span class="attr">requires</span> = [<span class="string">&quot;poetry-core&quot;</span>]</span><br><span class="line"><span class="attr">build-backend</span> = <span class="string">&quot;poetry.core.masonry.api&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="å…«ã€poetry-install-sync"><a href="#å…«ã€poetry-install-sync" class="headerlink" title="å…«ã€poetry install --sync"></a>å…«ã€<code>poetry install --sync</code></h2><p>ä¸ä¹…å‰æ‰ç™¼ç¾ï¼Œè™›æ“¬ç’°å¢ƒç”¨ä¹…äº†ï¼Œå®‰è£çš„å¥—ä»¶ä¼¼ä¹å’Œ lock æª”ä¸å®Œå…¨ä¸€è‡´ï¼æˆ‘ä¸€ç›´ä»¥ç‚ºå…©è€…æ˜¯ä¸€å®šåŒæ­¥çš„ğŸ¸ï¼Œé¡¯ç„¶ä¸æ˜¯ã€‚</p>
<p>åƒè€ƒ<a target="_blank" rel="noopener" href="https://python-poetry.org/docs/managing-dependencies/#synchronizing-dependencies">æ–‡ä»¶</a>ï¼Œå¯ç”¨ä¸‹åˆ—æŒ‡ä»¤ç¢ºä¿åŒæ­¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poetry install --<span class="built_in">sync</span></span><br></pre></td></tr></table></figure>

<h2 id="ä¹ã€Docker-ç’°å¢ƒä¸­ä½¿ç”¨-Poetry"><a href="#ä¹ã€Docker-ç’°å¢ƒä¸­ä½¿ç”¨-Poetry" class="headerlink" title="ä¹ã€Docker ç’°å¢ƒä¸­ä½¿ç”¨ Poetry"></a>ä¹ã€Docker ç’°å¢ƒä¸­ä½¿ç”¨ Poetry</h2><p>å‰æ–‡ä¸­æœ‰<a href="https://blog.kyomind.tw/python-poetry/#%E4%BA%94%E3%80%81%E7%82%BA%E4%BB%80%E9%BA%BC%E6%88%91%E4%B8%8D%E5%9C%A8-Docker-%E7%92%B0%E5%A2%83%E4%B8%AD%E4%BD%BF%E7%94%A8-Poetry%EF%BC%9F">é€™éº¼ä¸€æ®µ</a>ï¼Œé—¡è¿°æˆ‘ä¸åœ¨ Docker ä¸­ä½¿ç”¨ Poetry çš„<strong>ç†ç”±</strong>èˆ‡<strong>æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼š</p>
<blockquote>
<p>æ‰€å¹¸ Poetry ä¾èˆŠå¯ä»¥è¼¸å‡º<code>requirements.txt</code>ï¼ŒDocker éƒ¨ç½²ç’°å¢ƒå°±ç¹¼çºŒä½¿ç”¨é€™å€‹èˆŠæ–¹æ¡ˆå³å¯ï¼Œè€Œä¸” Poetry æœ¬ä¾†ä¸»è¦å°±æ˜¯ç”¨æ–¼ã€Œé–‹ç™¼ã€æ™‚çš„å¥—ä»¶ç®¡ç†ï¼Œå°éƒ¨ç½²å·®åˆ¥ä¸å¤§ã€‚</p>
</blockquote>
<p>èªªæ˜¯é€™æ¨£èªªï¼Œä½†ä¸€å¹´å¤šç”¨ä¸‹ä¾†ï¼Œæˆ‘ç™¼ç¾é€™å€‹åšæ³•ä¹Ÿ<strong>ä¸ç›¡ç†æƒ³</strong>ï¼Œå®ƒè‡³å°‘å­˜åœ¨å…©å€‹å•é¡Œï¼š</p>
<ol>
<li>å¥—ä»¶æœ‰è®Šå‹•æ™‚ï¼Œå¸¸å¸¸æœƒ<strong>å¿˜è¨˜åŒ¯å‡º</strong><code>requirements.txt</code>ï¼šä½ å¯ä»¥èªªé€™æ˜¯äººçš„å•é¡Œï¼Œä½†é€™å€‹ export <code>requirements.txt</code>åšæ³•ï¼Œå°±çœŸçš„å¾ˆå®¹æ˜“è®“äººå¿˜è¨˜ã€‚</li>
<li>ç”± Poetry åŒ¯å‡ºçš„<code>requirements.txt</code>ï¼Œä¸ä¸€å®šèƒ½é€é pip æ­£å¸¸å®‰è£å¥—ä»¶â€”â€”å…©è€…å­˜åœ¨<strong>è¼•å¾®çš„ç›¸å®¹æ€§å•é¡Œ</strong>ã€‚</li>
</ol>
<p>æ€éº¼è§£ï¼Ÿæˆ‘åœ¨åŸæ–‡ä¹Ÿå·²ç¶“è£œå……äº†ï¼š</p>
<blockquote>
<p>ä½¿ç”¨Â <strong><a target="_blank" rel="noopener" href="https://docs.docker.com/build/building/multi-stage/">multi-stage builds</a></strong>Â çš„ Dockerfileï¼Œå¯ä»¥åœ¨ç¬¬ä¸€éšæ®µå®‰è£ Poetryï¼Œç¬¬äºŒéšæ®µå†æŠŠ Poetry æ¨æ£„ï¼Œé€™æ¨£å°±ä¸æœƒæœ‰å¤šé¤˜çš„è€¦åˆèˆ‡ä¾è³´äº†ã€‚æ—¥å¾Œæœƒå°ˆæ–‡ä»‹ç´¹ã€‚</p>
</blockquote>
<p>å°ï¼Œæ‰€ä»¥ç³»åˆ—çš„ç¬¬ä¸‰ç¯‡æœƒæŠŠé€™éƒ¨åˆ†è£œå®Œã€‚</p>

      </div>
      
      
      

<div>
  <script type="text/javascript">
    document.write(
      "<iframe scrolling='no' frameborder='0' sandbox='allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-storage-access-by-user-activation' style='height: 212px; width: 100%;' src='https://button.like.co/in/embed/kyomind/button?referrer=" +
      encodeURIComponent(location.href.split("?")[0].split("#")[0]) + "'></iframe>");
  </script>
<div>

<div>
  <a href="https://portaly.cc/kyomind/support" target="_blank" class="cta">
    <span>æ”¯æŒæˆ‘çš„å‰µä½œ</span>
    <svg viewBox="0 0 13 10" height="10px" width="15px">
      <path d="M1,5 L11,5"></path>
      <polyline points="8 1 12 5 8 9"></polyline>
    </svg>
  </a>
</div>
<br>

    <b style="font-size:21px">
      ç›¸é—œæ–‡ç« 
    </b><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/python-poetry/" title="å†è¦‹äº† pipï¼æœ€ä½³ Python å¥—ä»¶ç®¡ç†å™¨â€”â€”Poetry å®Œå…¨å…¥é–€æŒ‡å—" rel="bookmark">å†è¦‹äº† pipï¼æœ€ä½³ Python å¥—ä»¶ç®¡ç†å™¨â€”â€”Poetry å®Œå…¨å…¥é–€æŒ‡å—</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/pyproject-toml/" title="pyproject.toml ä»‹ç´¹ + VS Code æ•´åˆ Blackã€yapfã€isort æ•™å­¸" rel="bookmark">pyproject.toml ä»‹ç´¹ + VS Code æ•´åˆ Blackã€yapfã€isort æ•™å­¸</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/pyenv-setup/" title="å‘Šåˆ¥ Anacondaï¼šåœ¨ macOS ä¸Šä½¿ç”¨ pyenv å»ºç«‹ Python é–‹ç™¼ç’°å¢ƒ" rel="bookmark">å‘Šåˆ¥ Anacondaï¼šåœ¨ macOS ä¸Šä½¿ç”¨ pyenv å»ºç«‹ Python é–‹ç™¼ç’°å¢ƒ</a></h3></div></li></ul><footer class="post-footer">
        <div class="post-tags">
            <a href="/tags/pyproject-toml/">pyproject.toml</a>
            <a href="/tags/Python/">Python</a>
            <a href="/tags/pyenv/">pyenv</a>
            <a href="/tags/Poetry/">Poetry</a>
            <a href="/tags/Docker/">Docker</a>
            <a href="/tags/pip/">pip</a>
            <a href="/tags/virtualenv/">virtualenv</a>
            </div>
        
        <nav class="post-nav"><a class="prev" href="/weekly-review-19/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">19ï¼ŒAI æ™‚ä»£çš„ç”Ÿå­˜æŒ‡å—ï¼ˆäºŒï¼‰æ•¸ä½æ–·æ¨é›¢</span>
        <span class="prev-text nav-mobile">19ï¼ŒAI æ™‚ä»£çš„ç”Ÿå­˜æŒ‡å—ï¼ˆäºŒï¼‰æ•¸ä½æ–·æ¨é›¢</span>
      </a>
    <a class="next" href="/weekly-review-18/">
        <span class="next-text nav-default">18ï¼Œè«–è»Ÿé«”å·¥ç¨‹å¸«å¸¸è¦‹çš„ã€Œè·¯å¾‘ä¾è³´ã€å•é¡Œï¼ˆä¸Šï¼‰</span>
        <span class="prev-text nav-mobile">18ï¼Œè«–è»Ÿé«”å·¥ç¨‹å¸«å¸¸è¦‹çš„ã€Œè·¯å¾‘ä¾è³´ã€å•é¡Œï¼ˆä¸Šï¼‰</span>
        <i class="iconfont icon-right"></i>
      </a>
    </nav></footer>
    
      

<div style="background-color: #e7e9ec; border-radius: 5px;">
  <div class="categories">
    <div class="categories-tags">
      <a class="category-link" href="/categories/Django/">Django<span class="category-count">3</span></a> <a class="category-link" href="/categories/Docker/">Docker<span class="category-count">2</span></a> <a class="category-link" href="/categories/VS-Code/">VS Code<span class="category-count">10</span></a> <a class="category-link" href="/categories/Weekly-Review/">Weekly Review<span class="category-count">21</span></a> <a class="category-link" href="/categories/%E5%BF%83%E5%BE%97/">å¿ƒå¾—<span class="category-count">14</span></a> <a class="category-link" href="/categories/%E6%9B%B8%E8%A9%95/">æ›¸è©•<span class="category-count">2</span></a> <a class="category-link" href="/categories/%E8%BB%9F%E9%AB%94%E9%96%8B%E7%99%BC/">è»Ÿé«”é–‹ç™¼<span class="category-count">18</span></a> <a class="category-link" href="/categories/%E9%9A%A8%E7%AD%86%E9%9B%9C%E8%AB%87/">éš¨ç­†é›œè«‡<span class="category-count">15</span></a>
    </div>
  </div>
</div>
</article></div><div class="comments" id="comments"><div id="utterances-container"></div>
    </div></div>
      </main>

      <footer id="footer" class="footer"><div class="social-links"><a href="mailto:odinxp@email.com" class="iconfont icon-email" title="email"></a>
        <a target="_blank" rel="noopener" href="https://facebook.com/kyomind" class="iconfont icon-facebook" title="facebook"></a>
        <a target="_blank" rel="noopener" href="https://github.com/kyomind" class="iconfont icon-github" title="github"></a>
        <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    </div><div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>
  </span>
  <span class="division">and</span>
  <span class="theme-info">
    <a class="theme-link" target="_blank" rel="noopener" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">&copy;2021 - 2023<span class="heart">
      <i class="iconfont icon-right"></i>
    </span>
    <span class="author">kyo</span>
  </span>
</div>
</footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div><script>
    var container = document.getElementById('utterances-container')
    var script = document.createElement('script')
    script.src = 'https://utteranc.es/client.js'
    script.setAttribute('repo', 'kyomind/blog-reply')
    script.setAttribute('issue-term', 'title')
    script.setAttribute('theme', 'github-light')
    script.setAttribute('label', 'utterances')
    script.crossorigin = 'anonymous'
    script.async = true

    container.appendChild(script)
  </script><script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/src/even.js?v=2.11.0"></script>
</body>
</html>
